---
title: 海龟交易法则
layout: post
categories: 量化
tags: 量化 海龟交易法则 期货
excerpt: 海龟交易法则：方法与实践
---

# 序
> 页码 16

多年来，我经常与他们中的几个人交流，学习着他们交易方法的精髓。我还在我的交易系统培训班和我的《期望值和头寸规模指南》（The Definitive Guide to Expectancy and Position Sizing）一书中介绍了他们的头寸规模算法（position sizing algorithm）的较一般形式

> 页码 17

本书重视赛局理论，而且用赛局理论解释了一个交易者的正确思考方法，这是它的第三个我非常喜欢的特征。例如，它认为交易者应该把精力集中在当年的交易上，忘记过去和未来。为什么？因为历史经验告诉你，你可能大多数时间都是错的，但你的赢利将远大于你的损失。这意味着期望值为正。柯蒂斯告诉读者，他们必须理解他们的交易系统的期望结果，并对这个结果抱有信心。从长期来看，这种信心就是他们的制胜法宝。

-----

## 基础问题
> 问题： 期货的本质是什么？

参考： https://www.youtube.com/watch?v=STSJHA6wzTg

期货允许在将来某个日期出售货物或资产 并以今天商议的价格成交 这个价格叫做远期价格
做多合约的人同意 在将来用远期价格买入合约上的货物
做空合约的人同意 在将来用远期价格交割合约上制定数量的货物
期货本来的意图是给企业提供一种方式 让他们可以控制采购成本

> 问题： 如何通过期货获利？

参考： https://www.youtube.com/watch?v=STSJHA6wzTg

持有当下资产更占便宜 期货的远期价格就要低于市价 比如支付股息的股票
相反，需要持有成本的 期货的远期价格就要高于市价 比如牛羊，原油
假如你认为黄金会上涨 决定做多黄金期货合约 合约资产为1750美元每盎司(100盎司) 一年后交割 你获利的多少取决于一年后黄金的市价 如果一年后黄金的市价是一千八百每盎司 那么就会获利五千美元 因为合约里的黄金数量是一百盎司 相反 如果一年后黄金的市价跌到一千七百美元 那么你将损失五千美元。

> 问题： 合约到期了 我该怎么接受这么多黄金 又或者是你做空期货该如何提供这么多黄金

参考： https://www.youtube.com/watch?v=STSJHA6wzTg

实际上期货合约的结算并不一定非得是实际货物 还可以是现金 在合约到期之前的任何时间 你也可以终止合约兑现现金 比如你之前做空一百盎司的黄金期货 现在你只需要做多同样数量同样交割日期的一百盎司的期货合约就可以平仓出局

-----

> “在绝大多数情况下，我们并不会因为一期合约即将到期就退出。我们只是将头寸转向下一期合约，也就是退出当月就要到期的头寸，转而持有下一个月的头寸。但这一次的情况有所不同，因为这次趋势仅限于1984年2月份的合约，没有滚动交易的理由。这也意味着我只有盯住2月份的合约才能抓住这次趋势。”

> 问题：这里转而持有下一个月的头寸是怎么操作的？

这里所说的"将头寸转向下一期合约"，也称为"滚动交易"或"转仓"，是期货交易中一种常见的操作。它的目的是为了避免期货合约到期和实际交割，维持投资者在某一特定市场中的头寸。投资者通过卖出即将到期的期货合约，同时买入下一期的期货合约来实现。

举例来说，假设现在是7月，一个交易员持有8月份到期的黄金期货合约。由于期货合约的到期日接近，交易员不希望承担实际交割黄金的责任，他就需要"转仓"。这个过程具体来说，就是他需要卖出他持有的8月份到期的黄金期货合约，并同时购买9月份到期的黄金期货合约。这样，他就成功地将他的头寸从8月份转向到了9月份。


##  引言 幸运的一天
> 页码 30

交易的难点不在于概念，而在于应用。学习如何交易相对容易，但把学到的东西应用在实际交易中是非常难的。

# 1. 第一章 玩风险游戏的交易者
> 页码 32

投资者买东西是为了长远目标，他们相信，在一段相当长的时间（许多年）之后，他们的投资会升值。他们会买实物，也就是实实在在的东西。沃伦·巴菲特就是个投资者。

> 页码 33

交易者们却不会去买像企业这样的实物，他们也不会买下谷物、黄金或白银。他们买的是股票、期货合约和期权。他们不会太关心管理团队的水平，不会太关心寒冷的东北部地区的油料消费趋势，也不会太关心全球咖啡产量。交易者只关心价格，从本质上说，他们买卖的是风险。

> 页码 33

彼得·伯恩斯坦（Peter Bernstein）曾在他那本引人入胜的《与天为敌：风险探索传奇》（Against the Gods: The Remarkable Story of Risk）中说过，市场允许风险从一个参与者转移到另一个参与者。这实际上就是人们创造金融市场的原因，也是金融市场的一个永恒的功能。

## 1.1. 流动性风险和价格风险
> 页码 35

价格风险是指价格大幅上升或下跌的风险。一个农场主可能会担心油价上涨，因为油价一涨，肥料和拖拉机燃料的成本就会上涨。农场主们也会担心他们的产品（小麦、棉花、大豆等）的价格跌得太低，以至于没钱可赚。航空公司的高管们既担心油料成本上涨，也担心利率提高，因为高利率会加大飞机的融资成本。

> 页码 36

对冲者们通过把风险转移给交易者来规避价格风险。经营这种价格风险的交易者们被称作投机商（speculator）或头寸交易商（position trader）。投机商们靠价格的变化赚钱：先买入，然后等价格上涨时卖出；或者先卖出，然后等价格下降时买回平仓——这种交易被称作卖空。

## 1.2. 对冲者、投机者和帽客
> 页码 37

交易以合约为单位：你的交易量不能小于一份合约。交易所的合约规格也规定了价格的最小变动幅度，这个幅度在业内被称作一个单位（tick）或最小单位（minimum tick）。

> 页码 38

一个案例：

阿珂姆（ACME）公司想为它的英国实验室规避成本上升的风险，于是在芝加哥商业交易所（CME）买了10份英镑期货合约。
ACME公司之所以有风险，是因为英镑一直在升值，而英国实验室的成本是用英镑来支付的。
如果英镑相对美元而升值，这个实验室的美元成本就会上升。
买入10份英镑合约能消除这种风险，使公司不受汇率波动的影响。
因为如果英镑相对美元而升值，期货合约的赢利将抵消成本上涨的损失。

ACME公司从一个芝加哥场内交易商萨姆那里以每英镑1.8452美元的价位买到了这些合约，萨姆就是我们所说的那种帽客。
实际交易是由ACME公司的经纪人万世（MAN）金融公司执行的。
MAN公司在交易厅内有自己的雇员：有的是电话员，负责在环绕交易大厅的一排排座位上接听电话，还有的是英镑交易场内的交易员，负责为MAN公司执行交易。
跑单员（runner）把来自电话席的交易命令传送给了场内的一个交易员，交易员继而与萨姆成交。如果交易量太大，或者市场变化太快，MAN公司的场内交易员可能会用手势信号直接从MAN公司的电话席那里接收买卖信号。
期货合约的细节是由交易所规定的，全都写在一份叫作合约规格（contract specification）的文件里。这些文件规定了一份合约所代表的货物数量和种类，有时候还规定了某种特定商品的质量。在过去，一份合约的货物量是根据一节车皮的承载量来决定的：5000蒲式耳谷物，112 000磅糖，1 000桶油等。因此，合约有时候也被称作车皮。交易以合约为单位：你的交易量不能小于一份合约。交易所的合约规格也规定了价格的最小变动幅度，这个幅度在业内被称作一个单位（tick）或最小单位（minimum tick）。

根据芝加哥商业交易所的规定，一份英镑合约代表62500英镑，最小价格单位是1/100美分，也就是0.0001美元。所以，每一单位的价格变动价值为6.25美元。这意味着萨姆可以从每一个单位的价差上赚到62.50美元，因为他卖出了10份合约。他向ACME公司出售这些合约的时候，买入价是每份合约1.8450美元，卖出价是每份合约1.8452美元，价差是两个单位。为了平仓，萨姆会试着“立刻以每份合约1.8450美元的价格买入10份合约。如果成功买入，他将会得到两个单位的利润，也就是100美元多一点。萨姆从一个大投机商艾斯先生那里买到了这10份合约。艾斯正在抛空建仓，赌价格的下跌——这样的头寸被称为空头头寸（short position）。艾斯先生持有这个头寸的时间可能是10天，也可能是10个月，这要看市场价格如何变化。

所以，共有三类交易者参与了这次交易：
- 对冲者：也就是ACME公司对冲部门的交易者，为了消除汇率波动所隐含的价格风险，他在市场上用对冲交易来抵消这种风险。
- 帽客：也就是场内交易商萨姆，他经营的是流动性风险，希望通过快速与对冲者进行交易，赚取买卖价差。
- 投机者：也就是艾斯先生，他最终承担起了ACME公司想消除的“价格风险”，寄希望于价格会在接下来的几天或几个星期内下跌。”

-------

> 问题： 详细解释下这里萨姆是怎么赚钱的？

萨姆是一个场内交易商，他的利润来源于买入和卖出价格之间的差距，这被称为"价差"或者"点差"。在这个例子中，他向ACME公司出售了10份英镑合约，每份合约的卖出价格为1.8452美元，然后他打算以1.8450美元的价格买回这10份合约。所以，每份合约的价差是0.0002美元。

根据芝加哥商业交易所的规定，每份英镑合约代表62500英镑，每一单位的价格变动价值为6.25美元。也就是说，当每份合约的价格变动0.0001美元时，萨姆就能赚取6.25美元。在这个例子中，萨姆卖出和买回的价差是0.0002美元，也就是两个单位，所以他能赚取两个单位的变动价值，即26.25美元=12.50美元。由于萨姆卖出了10份合约，所以他总的赚取金额为12.50美元10=125美元。

----

为了说明价格变动的背后机制，让我们把情节稍作变化。
假设萨姆没办法以每份合约1.8450美元的价格买回10份合约来平掉他的空头头寸，因为有一个经纪商正在替东方汇理金融公司以每份合约1.8452美元的市场卖出价大举买入英镑合约。这个经纪商买的实在太多，以至于所有的场内交易商都开始紧张起来。尽管有些交易商可能持有多头头寸（long position），但也有很多交易商可能已经卖空10份、20份甚至100份合约，这意味着价格上涨会让他们赔钱。由于东方汇理金融公司的态度代表着许多大的投机商和对冲基金，它的买入举动尤其令人不安。“东方汇理还想买多少？”场内帽客们在问，“是谁下达了这个命令？”“这是否只是一次大规模行动的开端？

> 问题： 假设萨姆没办法以每份合约1.8450美元的价格买回10份合约来平掉他的空头头寸，萨姆是怎么陷入麻烦的？

萨姆的赚钱策略依赖于他能以低于或等于卖出价格的价格买回英镑合约。然而，在这个例子中，东方汇理金融公司开始大量买入英镑合约，推高了市场价格。当市场价格超过了萨姆的买入价格1.8450美元，他就无法以预计的价格买回合约了。因此，他无法平掉他的空头头寸（卖空头寸），也就无法实现他的利润。

此外，这种大规模买入行为还可能导致市场恐慌。因为其他的场内交易商可能也在卖空英镑合约，当价格上涨，他们的空头头寸就会产生亏损。如果东方汇理金融公司的买入行为持续下去，市场价格可能会持续上涨，使得萨姆和其他的场内交易商陷入更大的亏损。这就是萨姆陷入麻烦的原因。

> 如何理解萨姆需要平掉他的空头头寸？以时间线来举例，萨姆的交易过程和动作。

空头头寸是投资术语，表示投资者卖出了他并未拥有的资产。他们这么做的原因是他们预期未来这个资产的价格会下跌。在价格下跌时，他们可以用更低的价格买入这个资产，再将其归还给他们原来卖给的人，差价就是他们的收益。这是一种对冲策略，用来减少风险或者从预期的价格下跌中获利。

让我们以时间线的方式来解释这个过程。

1. 萨姆作为一个场内交易商，他在市场上卖出了10份他并未拥有的英镑期货合约，卖出价格是1.8452美元/英镑。这些合约的买家是ACME公司。这个时候，萨姆就形成了一个空头头寸。

2. 萨姆的预期是，未来他可以以更低的价格买回这10份英镑期货合约，也就是他预期未来英镑会对美元贬值。

3. 然后，假设市场上英镑的价格真的下跌了，萨姆就可以以更低的价格（比如1.8450美元/英镑）买回这10份期货合约。这个行为被称为平掉空头头寸。

4. 当萨姆买回这10份合约之后，他原来卖出的空头头寸就不存在了，而且他从卖出和买回的价格差（1.8452-1.8450=0.0002美元/英镑）中赚取了利润。

需要明白的是，期货合约是一种衍生产品，他并不需要借来合约再卖出。他的责任是在未来某个时间，按照约定的价格交割一定数量的商品，例如这里的英镑。所以当萨姆卖出合约时，他并不需要真的拥有这些英镑，他需要的是在未来交割日，按照1.8452美元/英镑的价格，向ACME公司交割62500*10英镑。

相对的，多头头寸（Long Position）指的是投资者购买了一种资产，如股票、期货或者其他金融产品，期待其价格会上涨，以便在未来以更高的价格卖出获利。总的来说，购买一种资产或者购买期货合约以期待价格上涨就是建立多头头寸。

在这个情境中，ACME公司买入了10份英镑期货合约，期待英镑对美元的价值上升。这样做的原因是公司想要规避英镑升值带来的成本上升风险。因此，ACME公司在此交易中持有了一个多头头寸。

-----

> 如果你是个已经卖空20份合约的场内交易商，你也会变得惶恐不安。假设东方汇理试图买入500份或1 000份合约，这样大的交易量或许会把价格推高到每份合约1.8460美元或1.8470美元的程度。你绝对不敢在1.8452美元的价格再卖出。你或许愿意在1.8453美元或1.8455美元的价位再卖出一点，但也有可能你只想在1.8452美元的价位买回平仓，甚至甘愿赔钱选择在1.8453美元或1.8454美元的价格买回，而不再敢指望能在1.8450美元的价格买回。如何理解这里的选择？

在期货交易中，买方的收益是期货合约买入价格与合约履行时价格之间的差额。卖方（空头）则相反，他们的收益是期货合约卖出价格与合约履行时价格之间的差额。如果你已经空头卖出了20份合约，你的赚钱机会在于未来英镑对美元的汇率下跌。你期待在未来以更低的价格买回合约，从而实现盈利。

但现在的问题是，由于东方汇理金融公司大量买入英镑期货合约，市场价格正在被推高。如果价格上升到1.8460美元或1.8470美元，远远超过你原本卖出的价格1.8452美元，那你就会亏损，因为你需要以高于你卖出价格的金额来买回合约，导致损失。

因此，作为已经卖空20份合约的场内交易商，你可能会愿意在1.8453美元或1.8455美元的价位再卖出一些合约，希望能够通过提高平均卖出价格来减小可能的亏损。但是，由于东方汇理金融公司买入的数量太大，可能会继续推高价格，所以你可能并不愿意冒险继续卖出。

这也是为什么你可能宁愿在1.8453美元或1.8454美元的价格买回来平仓，即使这意味着你需要承担亏损。因为如果你继续等待，而价格继续上涨，你可能会面临更大的亏损。这就是期货交易中的风险管理，你需要权衡继续持有合约可能带来的更大亏损，和现在就以小亏结束的选择。

-----

在这类情况下，买卖价差可能扩大——买入价是每份合约1.8450美元，卖出价变为每份合约1.8455美元。或者买入价和卖出价同时提高，变为买入价1.8452美元，卖出价1.8455美元，因为曾经在1.8452美元时卖空的那些帽客们试图在以同样的价格买回，不赔不赚地平掉他们的头寸。

是什么变了？价格为什么会提高？价格变动取决于市场中所有买者和卖者的共同态度，这些买卖者就是我们所说的那些帽客、投机者和对冲者：想在一天内反复赚取微小买卖差价的人，想投机于一天内价格小幅变化的人，想投机于几个星期或几个月内价格的大幅变化的人，以及想规避经营风险的人。

共同态度变了，价格就会变化。不管什么原因，一旦卖者不再愿意以目前的价格卖出，而是想提高价格；买者又愿意接受这个更高的价格时，市场价格就会上涨。同样，不管什么原因，一旦买者不再愿意接受目前的价格，而是想压低价格；卖者又愿意在这个更低的价格卖出时，市场价格就会下跌。共同态度可能会有“自促”作用。如果有足够多的场内交易者持有空头头寸，却有一个大买单不期而至，恐慌可能出现。一个大买家可能会把价格推高到一定的程度，引发其他一些预挂的买单成交，这会导致价格进一步上涨。出于这个原因，有经验的帽客会在价格开始攀升的时候迅速退出空头头寸，只做多头。

回到上面所说的例子。一个行动不够快的场内交易者可能很快就发现他的损失达到了每份合约10个、20个甚至50个价格单位。如果他持有50份合约，每份损失50个单位，他的损失总共是15625美元（50×50×6.25美元），可能会把他在一个星期甚至一个月中的赢利席卷一空。损失大到一定程度时，目睹这么多钱付诸东流的痛苦会让一个帽客不堪忍受，方寸大乱，惊慌失措地买入平仓，不管价格有多么高。在一个瞬息万变的市场中，这个变化可能只是一两分钟内的事；即使在一个较为温和的市场中，整个过程可能也只需10~15分钟。你会发现，经验丰富的交易者不仅会早早地买入，及时退出他们的空头头寸，还会顺便多买一些，转而做多，等待价格继续上涨。当经验不足的交易者在恐慌中盲目买入时，这些老练的交易者就有机会高价卖出，再赚一笔。

------


# 2. 第二章 揭秘海龟思维
## 2.1. 情绪陷阱
> 页码 46

交易过程中，你曾多少次感受到以下的情绪？
- 希望：我当然希望我买了之后，它马上就涨。
- 恐惧：我再也赔不起了，这一次我得躲得远远的。
- 贪心：我赚翻了，我要把我的头寸扩大一倍。
- 绝望：这个交易系统不管用，我一直在赔钱。

> 页码 46

下是几种对交易行为有影响的认知偏差：
- 损失厌恶（loss aversion）：对避免损失有一种强烈的偏好。也就是说，不赔钱远比赚钱更重要。
患上损失厌恶症的人对避免损失有一种绝对的偏好，赢利只是第二位的。对大多数人来说，没有赚到100美元与损失了100美元并不是一回事。但是从理性角度来看，这两者是一回事：它们都代表着这100美元没有赢利。研究表明，损失的心理影响可能比赢利大一倍。
- 沉没成本效应（sunk costs effect）：更重视已经花掉的钱，而不是未来可能要花的钱。
在互联网热潮的黄金时期，我就在硅谷工作，认识很多高科技公司的工程师和营销官员。其中有几个身家过百万美元，因为他们手里有上市公司的股票期权。在1999年后期到2000年年初的那段时间，他们志得意满地目睹股价一天接一天地蹿升。当股价在2000年开始下跌时，我问许多朋友他们打算什么时候卖掉手中的股票。他们的回答几乎如出一辙：“等价格回到X美元的时候，我就卖。”而这个X要远高于当时的市价。结果，几乎每一个人都眼睁睁地看着他们的股票一路跌到了最初价值的1/10甚至1/100，他们却始终没有卖出。价格越低，他们就越有理由继续等待。“我已经赔了200万美元，再赔个几百美元算什么？”这是他们的普遍心态。
- 处置效应（disposition effect）：早早兑现利润，却让损失持续下去。
处置效应是指投资者倾向于卖掉价格正在上涨的股票，却保留价值正在下跌的股票。有人认为这种效应与沉没成本效应有关，因为两种现象都证明了一件事：投资者不愿意承认过去的决策并不成功。类似的，早早兑现利润的倾向也是来源于人们不愿意丢掉赢利机会的倾向。对怀有这种倾向的交易者来说，弥补大损失是很难的，因为能够赚大钱的交易早早就被终结，潜力也就永远失去了。
- 结果偏好（outcome bias）：只会根据一个决策的结果来判断它的好坏，而不去考虑决策本身的质量。
结果偏好会导致人们过于重视实际发生的事情，忽视决策本身的质量。在交易世界中，即使是正确的方法也可能赔钱，甚至有可能连续赔钱。这些损失会导致交易者怀疑自己，怀疑自己的决策程序，于是对自己一直在使用的方法作出负面评价，因为这个方法的结果是负面的。再加上近期偏好，这个问题会变得尤其严重。
- 近期偏好（recency bias）：更重视近期的数据或经验，忽视早期的数据或经验。
- 锚定效应（anchoring）：过于依赖（或锚定）容易获得的信息。
锚定效应是指人们在作出一个涉及不确定性的决策时过于依赖那些容易获得的信息。他们可能会盯着近期的一个价位，根据当前价格与这个参考价格的关系来作出决策。这就是我那些朋友们这么不愿意卖出股票的原因：他们只顾盯着近期的高点，然后拿当前的价格与这些高点相比较。如果这么比较，当前价格总是显得太低了。
- 潮流效应（bandwagon effect）：盲目相信一件事，只因为其他许多人都相信它。
- 小数定律（the law of small numbers）：从太少的信息中得出没有依据的结论。
信奉小数定律会导致人们过早地建立信心，或过早地失去信心。再加上近期偏好和结果偏好的影响，交易者往往会在一个有效的系统刚要开始发挥作用的时候就将它抛弃。

## 2.2. 海龟交易策略
> 页码 53

趋势跟踪
使用这种方法的交易者试图利用几个月内的大趋势。趋势跟踪者在市场处于历史高位或低位的时候入市，如果市场逆转，而且逆转趋势维持了几个星期，他们就会退出

> 页码 55

反趋势交易
当市场没有形成趋势时，反趋势交易者通过与趋势跟踪法截然相反的策略来赚钱。这类交易者不是在市场创新高的时候买入，而是在价格接近新高的时候卖空。他们的理论依据是，新高的突破大多都不会引发市场趋势

> 页码 56

当日交易
当日交易（day trading）与其说是一种风格，不如说是极端短期交易的代表。一个真正的当日交易者总是试图在每天的交易结束之前退出市场。这样一来，即使夜间爆发的负面新闻引发了开盘之后的剧烈变化，他们的头寸也不会受到什么影响。当日交易者一般会使用三种交易策略中的一种：头寸交易（position trading）、抢帽子（scalping）或套利。

## 2.3. 市场状态
> 页码 57

如图2–1所示，投机性的市场分为以下四种状态：

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812170128.png)

- 稳定平静：价格在一个相对较小的范围内上下波动，很少超出这个范围。
- 稳定波动：有大的日间或周间变化，但没有重大的月际变化。
- 平静的趋势：价格在几个月中呈现出缓慢的运动或趋向，但始终没有剧烈的回调或反方向运动。
- 波动的趋势：价格有大的变化，偶尔伴有剧烈的短期逆转。

> 页码 59

海龟们从来不去预测市场的动向，而是会寻找市场处于某种特定状态的指示信号。这是一个重要的概念。优秀的交易者不会试着预测市场下一步会怎么样；相反，他们会观察指示信号，判断市场现在正处于什么样的状态中。

# 3. 第三章 海龟培训课程
> 页码 60

掌握优势，管理风险，坚定不移，简单明了。整个海龟培训计划，乃至所有成功交易的基础，都可以归结为这四个核心原则

## 3.1. 破产风险
> 页码 62

在赌博中，破产风险是指因为一连串失败而赔光所有钱的可能性。

> 页码 63

破产风险会随着赌注的增加而不成比例地迅速增大，这是它最重要的特征之一。如果你把每次的赌金翻一番，破产风险一般不止翻一番——视系统特性的不同，风险有可能翻上两番、三番甚至四番。

## 3.2. 资金管理
> 页码 63

所谓资金管理，就是指控制市场风险的程度，确保交易者能安然度过每一个交易者都必然要碰到的不利时期。交易者既要让赢利潜力最大化，又要把破产风险控制在可以接受的水平，资金管理就是这样一门艺术。

> 页码 64

海龟们使用两种资金管理方法。

首先，我们把头寸分成一个个小块。这样，即使一笔交易赔了钱，我们损失的也只是一个头寸的一部分。里奇和比尔把这些小块称作头寸单位。

其次，我们使用里奇和比尔发明的一种创新性的头寸规模决定方法。这种方法以市场的每日上下波动为基础，而波动幅度是以不变美元价衡量的。他们会为每一个市场计算出一个特定的合约数量，目的是让所有市场的绝对波动幅度大致相等。里奇和比尔把他们的波动性指标称为N，尽管现在的人更习惯称它为真实波动幅度均值（average true range, ATR）。真实波动幅度均值这个名称是J·韦尔斯·怀尔德（J. Welles Wilder）在他的《技术交易系统中的新概念》（New Concepts in Technical Trading Systems）一书中首先提出的。

> 问题： 波动性指标N如何计算？

真实波动幅度 = Max(H - L, H - PDC, PDC - L)
H：当日最高价
L：当日最低价
PDC：前一日收盘价

N = (19 * PDN + TR) / 20

N的计算公式中，PDN为前一日的N值，TR为当日的真实波动幅度


> 问题： ATR具体是如何计算的？

ATR 的计算方式如下：

计算"真实波动幅度"。真实波动幅度是以下三种情况中的最大值：当日最高价与当日最低价的差值、当日最高价与上一交易日收盘价的绝对值、当日最低价与上一交易日收盘价的绝对值。

计算ATR。ATR是过去N天的真实波动幅度的平均值。通常情况下，N的取值为14，即计算过去14天的真实波动幅度的平均值，但也可以根据需要进行调整。

ATR的主要用途是衡量市场的波动性。波动性越大，意味着价格变动越剧烈，风险也就越大。对于交易者来说，高波动性可能意味着更大的交易机会，但同时也意味着更高的风险。通过计算ATR，交易者可以更好地理解市场的波动性，以便更好地管理风险。

> 问题： 以每日市场波动性来决定投资头寸的规模，具体是怎么操作呢？

波动性越大，风险也越大，所以应该相应地减小投资头寸的规模。这样做的目的是保证在大幅度价格变动的情况下，投资者的潜在损失能够在可控范围内。换句话说，这是一种以风险调整投资规模的策略。

这种头寸规模决定方法的核心思想是：用一定的资金（比如，帐户中的1%）去冒一单位的市场波动性（以真实波动幅度均值（ATR）为量化指标）的风险。所以，如果一个市场的波动性（ATR）增加，那么投资者应该减少他们在这个市场的头寸规模；相反，如果一个市场的波动性（ATR）减少，投资者可以增加他们在这个市场的头寸规模。

具体的操作方式如下：首先，计算每个市场的ATR；然后，决定帐户中一部分资金（如1%）能够冒的风险；最后，使用这部分资金去购买合约，其中每个合约的价格变动幅度等于ATR。

以下是一个基于真实波动幅度均值（ATR）确定头寸规模的具体例子：

假设你有一个帐户，帐户里有10,000美元，你决定每次交易都冒险1%的账户金额，即100美元。

现在，你打算在某个特定的市场上交易，这个市场的ATR是0.5美元。换句话说，这个市场的平均每日波动范围是0.5美元。

根据你的风险管理策略，你愿意冒险的金额是100美元，而单个合约的每日波动范围是0.5美元，所以你可以计算出你应该买多少份合约。计算方式是将你愿意冒险的金额（100美元）除以单个合约的每日波动范围（0.5美元），即：

100美元 / 0.5美元/合约 = 200份合约

所以，你应该在这个市场购买200份合约。

请注意，这个计算只是为了简化，实际操作中还需要考虑合约的最小交易单位、交易费用、滑点等因素。同时，也要注意不超过账户的最大风险限制。此外，这种策略并不总能保证避免损失，因为市场的波动性可能会突然增大，导致实际损失超过预期的风险水平。

-----


## 3.3. 海龟的优势
> 页码 68

海龟思维
-  以长远眼光看待交易。
-  避免结果偏好。
-  相信正期望值的威力。

> 页码 68

海龟们正是以这样的方式看待损失的：损失只是做生意的成本，并不代表着一次错误交易或一个坏决策。要做到这一点，我们必须明白一件事：长期来看我们总会失而复得。海龟们相信，期望值为正的交易在长期内必能成功。

> 页码 68

如果里奇和比尔说某一个系统的期望值为0.2，那么这意味着你每1美元的风险投入能获得20美分的利润。他们是根据一个系统的历史交易记录来计算它的期望值的。期望值就等于每笔交易的平均赢利除以每笔交易的平均风险投入。风险投入则等于最初成交价和止损价（也就是在损失的情况下退出止损的价位）的差异乘以所买卖的合约数量，再乘以合约本身的大小。

> 页码 68

举个例子说明一下海龟们如何衡量风险。假设有一笔黄金交易，买入价是350美元，止损价是320美元，共买入了10份合约，那么这笔交易的风险水平等于：买入价与止损价的差异（30美元）乘以合约数量（10份合约）再乘以合约本身的大小（每份合约100盎司黄金），也就是30 000美元。

## 3.4. 趋势跟踪策略
> 页码 69

趋势是指价格在一段长达几星期或几个月的时期内保持一种变化态势的现象。趋势跟踪的基本策略就是在一个上扬趋势刚刚开始的时候买入，在这个趋势即将结束之前退出。市场有三种容易形成的趋势：向上趋势、向下趋势和水平趋势

> 页码 70

我们所使用的特殊方法叫作突破法，有时候也被称为唐奇安通道法（Donchian channels），因为是理查德·唐奇安（Richard Donchian）普及了这种通道突破法。这种方法的基本思路就是在市场超越过去特定时期内的最高点时（也就是突破前期价格水平时）买入。我们有两个系统：一个是被里奇和比尔称为系统1的中期系统，它根据过去20天（或者说4个交易周）的价格来决定高点和低点；还有一个时间跨度更长的系统，也就是系统2，它根据过去60天（12个交易周）内的高点和低点来确定突破点。在每个交易日结束后，我们都要为这两个系统重新计算高低突破点。一般来说，我们要做的就是回顾一下过去的一段时间，根据价格变化的视觉特征找出那么一两个高点。大多数时间里，高点不会变，所以我们也无事可做。每一个系统都有两种退出标准。第一个是以N衡量的止损退出点：损失不得超过2N，也就是两个真实波动幅度均值。从另一个角度说，这个跌幅恰好相当于我们的账户总额的2%，因为我们在每一个市场中决定交易量的方法也是以N为基础的。

> 问题： 举个例子来说明这种交易方法

假设你正在跟踪一个特定的市场（比如说，黄金期货市场）。为了运用唐奇安通道法，你需要关注过去20天和60天的最高点和最低点。

假设过去20天的最高价格是1800美元/盎司，过去60天的最高价格是1850美元/盎司。同时，市场的ATR（平均真实范围，也就是每日波动幅度的平均值）是20美元。

根据系统1，你会在市场价格突破过去20天最高价（1800美元/盎司）时买入。所以，如果在某一天，市场价格达到1801美元/盎司，你就会进场买入。

根据系统2，你会在市场价格突破过去60天最高价（1850美元/盎司）时买入。所以，如果在某一天，市场价格达到1851美元/盎司，你就会进场买入。

然后，你会设定你的止损点。按照海龟交易法的规定，止损点应设为买入价格下方2个ATR的位置。所以，如果你按照系统1在1801美元/盎司的价格买入，你的止损点应设为1801美元/盎司 - 2 * 20美元/盎司 = 1761美元/盎司。

同样，如果你按照系统2在1851美元/盎司的价格买入，你的止损点应设为1851美元/盎司 - 2 * 20美元/盎司 = 1811美元/盎司。

如果市场价格跌到你的止损点，你就需要卖出你的头寸，以避免更大的损失。这就是所谓的“以N衡量的止损退出”。

需要注意的是，这个策略的目标是在长期内获得利润，而不是在每一笔交易中都获利。有些时候，市场价格可能会在突破后立即反转，导致亏损。但是，通过长期坚持这个策略，投资者期望在市场价格出现大的趋势变动时能够获得大的利润，从而抵消短期内的小幅度损失。

> 页码 71

海龟培训课的所有内容可以归结为以下4个要点：
1. 掌握优势：找到一个期望值为正的交易策略，因为长期来看它能创造正的回报。
2. 管理风险：控制风险，守住阵地，否则即使你有一个期望值为正的系统，你也等不到它创造成果的那一天。
3. 坚定不移：唯有坚定不移地执行你的策略，你才能真正获得系统的正期望值。
4. 简单明了：海龟方法的精髓其实很简单——抓住每一个趋势。你的大部分利润可能就来自两三次成功的交易，所以不要错过任何趋势，否则你全年的努力可能都会化为泡影。这很简单，也很容易理解，只是不容易做到。

## 3.5. 第一次实战
> 页码 73

海龟们每个星期都会拿到一张表，上面列明了我们所参与的每一个市场中每100万美元的交易账户所对应的合约交易量。不过，为了简化交易过程，里奇和比尔要求我们在每一个市场中都使用同样大小的头寸单位：3份合约。对我们所交易的每一种合约，我们的最大头寸规模都是4个单位，也就是12份合约。这大致上与一个5万~10万美元的账户相对应。

"头寸单位"指的是一笔交易中购买或卖出的合约数量，而"头寸规模"则是在特定市场中，交易者可持有的最大头寸单位数。

以这里的情况为例，头寸单位被设定为3份合约。这意味着每次交易时，海龟交易员会买入或卖出3份合约。

头寸规模是4个单位，也就是12份合约。这意味着在任何特定的市场中，海龟交易员最多可以持有12份合约。无论市场条件如何，他们都不能超过这个数量。这是一个风险管理策略，可以防止在某一特定市场中过度投资。

例如，如果海龟交易员在某个市场中已经持有12份合约，即使市场条件看起来非常有利，他们也不能再增加投资，必须在其他市场寻找机会。

这种方法有助于分散投资风险，防止所有的资金都集中在一个市场，从而降低了市场突然变动可能带来的风险。

-------

新年伊始，1984年2月份的民用燃料油的价格就从0.80美元上涨到了0.84美元，于是我遵照系统的要求买入了3份合约。这笔交易立即赢利，而我在短短几天内就买足了12份合约的上限。在接下来的几天内，我们的“交易室”内充斥着买入命令和欢声笑语：民用燃料油的价格在不到一星期内就蹿升到了0.98美元。



# 4. 第四章 像海龟一样思考

## 4.1. 避免结果偏好
> 页码 81

简单地说，要想获胜，你必须让你的思维摆脱结果偏好的影响。个别交易的结果如何是无关紧要的。如果你连续赔了10次却仍然能够坚持你的策略，那么你做得很不错，只是运气有点儿差罢了。

## 4.2. 避免近期偏好
> 页码 81

海龟们会从过去的经历中吸取经验教训，但不会为过去而烦恼。他们不会为过去所犯的错误而责备自己，也不会对过去的失败耿耿于怀。他们知道这只是游戏的一部分。
海龟们会从整体角度观察过去，不会特别重视近期的事件。最近一段时期并不比历史上的其他任何时期更重要，只是会给人这种感觉罢了。海龟们会避免近期偏好。他们知道市场中的大多数交易者都有近期偏好，正因如此，市场往往会印证这种倾向。避免近期偏好的能力是成功交易的一个重要成分。

案例:

我们来看看表4–1：如果你用突破法做可可交易，那么从1998年4月一直到那个大趋势出现，你的交易记录就会如表中所示。请注意，在1998年11月的那个大获成功的赢利交易之前，连续有17个交易是赔钱的。

| 序号 | 头寸单位 | 入市时间 | 头寸    | 价格（美元） | 每一头寸单位的合约数量 | 退出价格（美元） | 利润率（%） | 利润（美元） | 利润总额（美元） |
|------|----------|----------|---------|--------------|------------------------|------------------|-------------|--------------|------------------|
| 1    | 1        | 4月27日  | L（多） | 2249         | 6                      | 2234             | -2.4        | -1197        |                  |
| 2    | 1        | 5月6日   | L L     | 2261         | 6                      | 2246             | -2.1        | -1026        |                  |
| 3    | 1        | 5月12日  | L L     | 2276         | 6                      | 2261             | -2.2        | -1036        |                  |
| 4    | 1        | 5月14日  | L L     | 2283         | 6                      | 2268             | -2.4        | -1133        |                  |
| 5    | 1        | 6月23日  | S（空） | 2100         | 6                      | 2114             | -2.3        | -1061        |                  |
| 6    | 1        | 6月25日  | S       | 2094         | 6                      | 2108             | -2.4        | -1053        |                  |
| 7    | 1        | 6月29日  | S       | 2085         | 6                      | 2099             | -3.0        | -1317        |                  |
| 8    | 1        | 7月15日  | S       | 2070         | 6                      | 2084             | -2.5        | -1066        |                  |
| 9    | 1        | 7月27日  | S       | 2069         | 5                      | 2083             | -1.9        | -777         |                  |
| 10   | 1        | 8月3日   | S       | 2050         | 5                      | 2064             | -2.7        | -1104        |                  |
| 11   | 1        | 8月13日  | S       | 2036         | 6                      | 2049             | -2.2        | -848         |                  |
| 12   | 1        | 8月17日  | S       | 2024         | 6                      | 2036             | -3.0        | -1155        |                  |
| 13   | 1        | 8月24日  | S       | 2024         | 6                      | 2035             | -2.4        | -874         |                  |
| 14   | 1        | 9月16日  | S       | 2014         | 5                      | 2026             | -2.1        | -756         |                  |
| 15   | 1        | 10月1日  | S       | 1979         | 5                      | 1992             | -2.4        | -845         |                  |
| 16   | 1        | 10月13日 | S       | 1976         | 5                      | 1988             | -2.2        | -779         |                  |
| 17   | 1        | 10月28日 | S       | 1967         | 5                      | 1979             | -2.1        | -722         | -16750           |
| 18   | 1        | 11月6日  | S       | 1961         | 5                      | 1438             | 75.0        | 24940        |                  |
| 19   | 2        | 11月20日 | S       | 1918         | 6                      | 1928             | -2.4        | -799         |                  |
| 20   | 2        | 11月24日 | S       | 1903         | 6                      | 1914             | -3.0        | -975         |                  |
| 21   | 2        | 11月30日 | S       | 1892         | 5                      | 1903             | -2.7        | -834         |                  |
| 22   | 2        | 12月8日  | S       | 1873         | 5                      | 1438             | 67.2        | 20575        |                  |
| 23   | 3        | 12月21日 | S       | 1824         | 5                      | 1836             | -3.5        | -1075        |                  |
| 24   | 3        | 1月4日   | S       | 1808         | 5                      | 1820             | -2.4        | -709         |                  |
| 25   | 3        | 1月15日  | S       | 1798         | 4                      | 1438             | 46.7        | 13468        |                  |
| 26   | 4        | 1月25日  | S       | 1748         | 4                      | 1760             | -2.1        | -608         |                  |
| 27   | 4        | 1月27日  | S       | 1742         | 4                      | 1754             | -2.1        | -605         |                  |
| 28   | 4        | 2月8日   | S       | 1738         | 7                      | 1438             | 42.8        | 19275        | 55903            |


在期货交易中，合约的大小（即每个合约代表的货物数量）是固定的。对于可可（cocoa）合约，每个合约代表10吨可可。所以，每一点价格的变化，都会使合约的价值变化10美元。

针对序号1的交易，多头头寸从2,249点下降到2,234点，跌幅为15点。因此，每个合约的损失就是15点 * 10美元/点 = 150美元。

表中的交易者买入了6个合约，所以总损失为6 * 150美元 = 900美元。

考虑期货市场的滑点（即实际成交价格与期望成交价格之间的差异）或者交易费用等因素之后， 表中的损失是1,197美元

对于序号18的交易，空头头寸从1,961点下降到1,438点，跌幅为523点。因此，每个合约的利润就是523点 * 10美元/点 = 5,230美元。

表中的交易者卖空了5个合约，所以总利润为5 * 5,230美元 = 26,150美元。

考虑期货市场的滑点（即实际成交价格与期望成交价格之间的差异）或者交易费用等因素之后， 表中的利润是24,940美元

在这个交易中要避免近期偏好心理的出现， 让最近失败的交易影响自己的判断。

---------


## 4.3. 避免预测未来
> 页码 85

我们已经说过人类的认知偏差对交易者的影响。有三种偏差是你必须不惜一切代价去克服的，那就是近期偏好、结果偏好以及预测未来的冲动


## 4.4. 从概率角度考虑问题

> 交易策略： 唐奇安趋势系统的一次20年间月度回报率的测试结果

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230729191535.png)
可以看到自己的月度回报是呈现长尾分布的。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230729191518.png)

在左右两端的数量刻度上，每一格代表着赔钱或赚钱交易的20%。比如，在左端，第五格代表3 746个赔钱的交易，占所有赔钱交易的100%。这意味着在22年的测试周期内共有3 746笔赔钱的交易。在右侧的图中，赚钱交易共有1 854个，占赚钱交易的100%。图中的条柱代表着不同R乘数（R-multiple）的交易各有多少。R乘数就等于一笔交易的利润除以这笔交易的风险投入，这个概念由交易者查克·布兰斯科姆（Chuck Branscomb）发明，是在不同系统和不同市场间比较交易结果的一种简易方式。（范·撒普在《通向金融王国的自由之路》中推广了R乘数的概念。）

举个例子。如果你在每盎司450美元的价位买了一份8月份黄金合约，止损退出价位是440美元，那么你的风险投入是1 000美元，因为450美元与440美元之差（10美元）乘以一份合约所代表的黄金数量（100盎司），等于1 000美元。如果这笔交易赚了5 000美元，那么它就是一笔5R交易，因为它的赢利是风险投入（1 000美元）的5倍。在图4–4中，赚钱的交易按1R的间隔分为不同档，赔钱的交易按1/2R的间隔分档。

在这个图中，赔钱的交易远多于赚钱的交易，这看起来或许有点奇怪，但实际上这是趋势跟踪系统的一个非常正常的现象。然而，尽管赔钱的交易有很多，但这个系统能保证大多数赔钱交易的损失额都接近于正常水平，也就是1R的入市风险。相比之下，赚钱交易的利润却远大于入市风险。

> 页码 93

像海龟一样思考
1. 重要的是现在：不要对过去念念不忘，也不要去预测未来。前者对你无益，后者是徒劳的。
2. 从概率角度考虑问题，不要预测未来：不要试图作出正确的预测，唯有使用概率对你有利的方法，你才能在长期内获得成功。
3. 对你自己的交易结果负责：不要把你的错误和失败归咎于其他人、市场、你的经纪人等。要对自己的错误负责，从错误中学习。

# 5. 第五章 发现系统优势
## 5.1. 系统优势的三大要素
> 页码 97

要找到优势，你需要找准入市点，在这个点上，市场在理想的时间范围内向某个特定方向变动的概率要大于正常概率。然后，你还要为这个入市点设计一个退出策略，这样才能从期望的变动趋势中获利。简单地说，要想让优势最大化，入市策略和退出策略必须配对。因此，趋势跟踪入市策略可以与多种不同类型的趋势跟踪退出策略配对，反趋势入市策略可以与多种不同类型的反趋势退出策略配对，波段交易入市策略可以与多种不同类型的波段交易退出策略配对，等等

> 页码 97

系统优势来自于三大要素：
- 资产组合的选择：决定应该进入哪些市场的运算系统。
- 入市信号：决定什么时候开始一笔交易的运算系统。
- 退出信号：决定什么时候退出一笔交易的运算系统

## 5.2. 优势比率
> 页码 98

当某种特定的市场行为发生时，系统会发出入市信号。当你检验入市信号时，你需要关注的是伴随这种市场行为而来的价格变动。我们可以把这种价格变动分为两个部分：好的变动和坏的变动

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812173314.png)

> 页码 99

交易者们把往坏方向的最大变动幅度称为MAE（maximum adverse excursion，最大不利变动幅度），把往好方向的最大变动幅度称为MFE（maximum favorable excursion，最大有利变动幅度）。因此，图中的双箭头线标明了这次价格变动的MAE和MFE。在这个例子中，MFE（好的价格变动）远大于MAE（坏的价格变动）

> 页码 99

为了把它转化为一种实实在在的衡量入市信号优势的方式，我们还得加上几个步骤。

首先，你要想办法让各个不同市场上的价格变动具有可比性。

其次，你要想办法决定衡量哪一段时期的平均MFE和MAE。

只有把不同市场的MFE和MAE标准化，比较这些平均值才是有意义的。

为此，你可以借用海龟们用来将不同市场的交易规模标准化的方法：用真实波动幅度均值（ATR）将它们统一化

> 页码 100

> 策略衡量指标： E–比率

我们已经发明了一种我们称之为E–比率（优势比率的简称）的入市优势衡量指标。这个E–比率通过以下公式将上述所有要素结合了起来：
1. 为每一个入市信号计算指定时间段内的MFE和MAE。
2. 将上述各MFE和MAE值分别除以入市时的ATR，这是为了根据波动性作出调整，将不同市场标准化。
3. 将上述调整后的MFE和MAE值分别求和，然后除以入市信号的总次数，得出调整后的平均MFE和MAE。
4. 调整后的平均MFE除以调整后的平均MAE就是E–比率。

> 页码 101

E–比率可以用来衡量一个入市信号是否具有优势。比如，你可以用它来检验一下一个完全随机性的入市策略是否有优势

> 页码 101

你也可以用E–比率来检验一下唐奇安趋势系统的主要要素。

这个系统的入市策略有两大要素，一个是唐奇安通道突破法则，另一个是趋势组合过滤器。

根据唐奇安通道突破法则，你应该在价格突破过去20天内的最高点时买入，在价格跌破过去20天内的最低点时卖空。

而趋势组合过滤器规定，你只能在50日均线高于300日均线的市场中做多，在50日均线低于300日均线的市场中做空。如果一个市场的状态对系统不利，这个趋势组合过滤器就会把这个市场剔除

> 页码 102

一般地说，一个入市策略的优势只有在这个策略所对应的时间跨度内才能体现出来。

> 页码 102

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812173626.png)

我们这个入市策略的E70–比率是1.20。这意味着，对20日突破法交易来说，入市信号之后70天内的平均有利变动幅度比平均不利变动幅度大20%

## 5.3. 趋势组合过滤器
> 页码 104

通过检验7万个结合了资产过滤器的随机入市信号，我们得到了高达1.27的E70–比率，比入市信号本身的E70–比率还要高。这明显说明这个资产组合选择法则能够增强系统的优势。
使用趋势组合过滤器大大提高了突破法交易获得理想结果的可能性。在我们这个例子中，E70–比率从1.20变成了1.33。另外，如果将趋势组合过滤器与突破法相结合，优势比率曲线图的形状会改变，而且会变得更加平滑（见图5–3）。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812173657.png)

# 6. 第六章 寻找交易时机
## 6.1. 支撑与阻力

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812173933.png)

## 6.2. 支撑位与阻力位的突破
> 页码 115

当价格“冲破”前期的阻力位或支撑位水平时，突破就发生了。作为突破法交易者，我们在阻力位被突破时买入做多，在支撑位被突破的时候卖出做空。在市场短期突破支撑位时，我们卖出以退出多头交易；在市场短期突破阻力位时，我们买入以退出空头交易

## 6.3. 价格不稳定点
> 页码 116

我把接近支撑位和阻力位边缘的那些价位称作价格不稳定点（points of price instability）。在这些点，价格不太容易保持稳定，而是更容易走高或走低。如果支撑位能守住，价格会走高。如果阻力位能守住，价格会在阻力位反弹走低。一旦支撑位或阻力位失守，价格会沿着突破方向继续前行，而且会前行相当长的一段距离。

> 页码 117

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812174012.png)

还是以图6–2为例，一个在2.10美元的价格买入做多的反趋势交易者可以设定一个2.04美元的止损退出点，因为这个价位代表着支撑位的突破。类似地，一个在2.10美元的突破位卖空的趋势跟踪者可以设定一个2.15美元或2.16美元的止损点。如果价格在触及2.10美元之后还能够反弹到2.15美元或2.16美元的水平，这说明市场仍然呈现强势，支撑位可以守住。

# 7. 第七章 如何衡量风险

## 7.1. 四大风险
> 页码 120

大多数交易者都担心4种主要的交易风险：
- 衰落：一连串损失使你的账户缩水。
- 低回报：回报太低，你赚到的钱微不足道。
- 价格动荡：一个或多个市场中出现价格的骤然变动，导致无可挽回的重大损失。
- 系统死亡：市场状态改变，致使曾经有效的系统突然失效。

> 页码 127

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812174406.png)
请看图7–4，这是一个使用唐奇安趋势系统的10万美元账户从1984年海龟们开始实战到1987年年末的情况。
你可以清楚地看到那个代表着65%跌幅的巨大缺口。请务必记住这个衰落是在一夜之间发生的。没有丝毫机会退出市场。还请注意，这一天内的跌幅比这个系统的任何一次历史检验结果都要大一倍。换句话说，系统的历史检验会把衰落风险低估一倍。

> 页码 129

所谓系统死亡，是指一个曾经有效或在历史检验中看似有效的系统突然之间不再有效，开始赔钱。这种风险并不是来自市场本身，而是由蹩脚的测试方式造成的。对那些根据近期价格波动进行最优化的短期系统来说，这个风险更大

> 页码 129

一个表现不佳的系统究竟只是处于一个正常的衰落期，还是真的不再有效？这对一个新手来说通常很难判断。我敢说，这可能是最令新手们头疼的一件事。当他们碰上一次衰落时，他们会开始怀疑自己的方法：我的测试是不是有问题？是不是市场发生了某些变化，使我的方法变得无效了？这种情况还会持续下去吗？

## 7.2. 风险的量化
> 页码 130

量化风险的方法有很多，以下是几种我认为很有效的常用方法：
1. 最大衰落：这是一个数字，代表一个测试期中从最高点到随后的最低点的下跌百分比。在图7–4中，这个数字等于65%，是1987年价格动荡的结果。
2. 最长衰落期：从一个顶峰到下一个新顶峰的最长周期。它衡量的是恢复速度，也就是在一段损失期之后需要多长时间才能重新站上新的高点。
3. 回报标准差：这是回报率分散状况的一个衡量指标。低标准差表明大多数时候的回报率都接近于平均值，高标准差表明不同月份之间的回报率差异较大。
4. R平方值：这个指标衡量的是实际投资回报率与平均复合增长率的吻合程度。对带息账户这一类的固定收益投资来说，R平方值等于1.0，而如果回报率不稳定，R平方值将小于1.0。

## 7.3. 回报的量化
> 页码 131

我们可以用很多种方法来量化回报，以下是我认为很有用的几种：
- 平均复合增长率（geometric average return）：平均复合增长率也称作几何平均回报率，是指特定投资期间内的平均化复利率。期初资产按这个复利率滚动增长，将恰好增长到期末资产的水平。对简单的带息账户来说，平均复合增长率就是利息率（复利）本身。在特定时期内，只要有一期的回报率特别高，整个平均复合增长率指标就会受到重大影响。
- 滚动平均一年期回报率（average one year trailing return）：这是指连续滚动计算的一年期平均回报率。这个指标能更好地反映任何一个特定一年期内的典型回报水平。对跨度在几年以上的测试来说，这个指标对某个回报率特别高的期间相对不是那么敏感。
- 平均月度回报率（average monthly return）：这是指测试期内各个月份的回报率平均值
![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812175041.png)

## 7.4. 衡量风险与回报的综合指标
> 页码 133

夏普比率是这样得出的：首先计算考察期内的超额回报率（也就是这段时期的月度或年度平均复合增长率减去所谓的无风险回报率，或者减去短期国债之类的无风险债券的利息率），然后把它除以期间回报率（一般是月度或年度回报率）的标准差。

夏普比率定义：

\[ \text{Sharpe Ratio} = \frac{R_p - R_f}{\sigma_p} \]

其中：
- \( R_p \) 是投资组合的预期回报率。
- \( R_f \) 是无风险回报率。
- \( \sigma_p \) 是投资组合的标准差，代表投资组合的风险。

> 页码 135

遗憾的是，夏普比率的流行似乎加剧了我在这个行业中所发现的一个问题：把回报的稳定性当成风险水平的唯一衡量标准。对那些不懂交易、不明白交易策略与传统股票投资的持有策略有何不同的人来说，这个问题尤其严重。
我必须强调一点：稳定性并不等于低风险，风险非常高的投资也有可能在有限的时期内创造稳定的回报。投资者们很容易相信，能在几年的时间内一直保持正回报率的投资或投资经理就是安全的选择。他们只是盲目地怀有这种信念，往往并不知道这些回报是怎么得来的。

> 页码 137

谨慎的基金经理会控制这些风险。遗憾的是，许多投资者并不知情，等他们意识到这些风险的存在时，往往为时已晚，他们已经失去了一切。他们是被基金的稳定回报率和多年来的良好表现诱惑而来的，殊不知，这些基金还没有经历过真正的艰险时期。

> 页码 137

MAR比率是管理账户报告（Managed Accounts Reports）有限公司发明的一个指标，这个公司专门提供对冲基金的业绩报告。MAR比率等于年均回报率除以最大的衰落幅度，衰落是根据月末数据计算的

**MAR比率定义**

\[ \text{MAR Ratio} = \frac{\text{Annualized Return}}{\text{Maximum Drawdown}} \]

其中：
- \(\text{Annualized Return}\) 是年均回报率。
- \(\text{Maximum Drawdown}\) 是最大的衰落幅度，通常根据月末数据计算。


## 7.5. 模仿效应与系统死亡风险
> 页码 138

说到交易的系统、策略和表现，我所观察到的最有趣的现象之一就是模仿效应：在风险回报比率上拥有傲人记录的那些策略往往都是最容易被整个行业群起模仿的策略。它们刚刚崭露头角，立即就被数十亿美元竞相追随，结果反而自毁长城，因为它们的规模已经超出了市场的承受能力。到头来，它们早早就成了系统死亡的牺牲品。

> 页码 138

使用某一种特定策略的人越多，价格差就消失得越快，因为这些交易者本质上都在争夺同样的机会。长此以往，这种效应会毁掉这种策略，因为它会变得越来越无利可图

> 页码 139

忌要求过高：如果你在检验一种策略的时候太过贪婪，你更有可能得不到你想要的结果。历史记录看似高人一筹的策略也最有可能引来新的追随者，当新来者们纷纷加入时，这些策略往往很快就变得不再神奇。

# 8. 第八章 风险与资金管理
> 页码 142

从本质上说，风险管理就是两个极端之间的一种平衡：一方面，风险不可过大，不然到头来可能赔光了一切，或者被迫退出交易；另一方面，风险过小也不行，省得回报甚微，到头来一无所获。过大的风险迫使你放弃交易主要有两种情况：一是没完没了的衰落超出了你的心理承受极限，再就是突然的价格动荡吞噬了你的账户。

> 页码 142

如果你决定铤而走险，你必须首先牢记一件重要的事：每年20%~30%的稳定回报就能在短时期内带给你巨大的财富，无论你的初始投入有多少。复利的力量是无比强大的，但前提是你没有中途破产，被迫从头再来。如果你投入5万美元，而且你的年均回报能达到30%的话，你在20年之后就能拥有将近1 000万美元。

> 页码 143

对大多数人来说，谨慎的交易方法应该把衰落控制在可以接受的水平，也就是说，根据历史模拟检验，衰落幅度最多不能超过你的承受力上限的1/2。这样，即使你的系统出现了前所未见的大幅衰落，你还有一定的缓冲余地。而且，你也不太容易被一次出人意料的价格动荡洗劫一空

## 8.1. 简单行事，抓住核心
> 页码 145

对新手们来说，风险过大也许是最常见的一个败因。新手们往往太过激进，以至于寥寥几次连续亏损就能让他们赔个精光。新交易者经常错误地理解杠杆的风险，因此，由于他们的经纪人和交易所允许他们用区区2万美元进行大宗交易，他们往往会真的冒险一试

> 页码 145

认为以下几点才是期货交易者的主要败因：
- 没有计划：许多交易者的行动依据是直觉、传闻、猜测，还有对自身预测能力的自信。
- 风险过大：许多在其他方面很出色的交易者是因为承受了过大的风险而破产的。我所说的大风险可不止比谨慎水平大50%或100%。我曾见过某些交易者的风险比我心目中的谨慎水平大5~10倍，即使对激进交易策略来说也是如此。
- 不切实际的期望：许多新交易者之所以承受过大的风险，是因为他们对自己的赢利能力和回报水平抱有不切实际的期望。这也是新手们相信自己仅凭那些基础数据就能开始交易的原因。他们相信自己足够聪明，可以在没受过多少培训的情况下仅凭那一点点信息就“击败”市场

## 8.2. 生存第一法则
交易的首要目标应该是生存。时间站在你这边。一个期望值为正的系统或方法早晚会给你带来财富，有时候是你做梦也想不到的巨大财富。但这一切有一个前提条件——你必须留在游戏场中。对交易者们来说，死亡有两种形式：一种是痛苦的慢性死亡，足以让交易者们在苦闷和沮丧中放弃交易；另一种是戏剧性的快速死亡，我们称为崩溃。

> 页码 148

未来的不确定性就是交易的难点所在，而每个人都不喜欢不确定性。遗憾的是，市场不可预测是不争的现实，你最多只能希望得到一种在长期内有效的方法。因此，你的方法应该尽可能地降低交易中的不确定性。市场本身已经够不确定了，再用蹩脚的资金管理去平添一份不确定性，岂不是荒唐透顶？

## 8.3. 头寸单位规模限制法则
> 页码 151

再回忆一下1987年10月的那次惊天动荡。那一天，几乎我们所参与的每一个市场都爆发了不利于我们的巨变。正是为了应对这类局面，里奇和比尔早已对我们的交易量施加了一些限制：第一，我们在每一个市场中最多只能投入4个头寸单位；第二，在高度相关的多个市场中，我们的多头或空头单位都不能超过6个；第三，我们在任何一个方向上的总交易量都不得超过10个头寸单位（也就是说，最多10个空头和10个多头），但对没有相关性的市场来说，这个限制可以放宽到12个。那一天，这些限制也许为里奇挽回了超过1亿美元的损失。如果我们没有这么做，我们的损失将会是一个天文数字。

> 页码 152

我经常看到某些人声称他们已经对海龟系统作过历史检验，发现这些方法表现不佳，或者根本赚不到钱。他们会大言不惭地说：“我已经试过了每一条法则，除了头寸单位规模限制。”问题是，头寸单位规模限制是海龟系统的一个不可或缺的部分，也是极端重要的组成部分，因为它们是滤除滞后市场的一种机制。

## 8.4. 风险衡量法则
> 页码 153

要判断一个系统的风险特征或持有一个头寸的内在风险，最佳方法之一就是回顾过去30~50年之内曾经出现过的严重价格动荡。只要你回忆一下这些灾难性的时期，思考一下某些类型的头寸可能遭受的损失，你就能判断出多大的风险可能造成50%的衰落甚至是彻底破产。借用电脑模拟软件，你可以很轻松地看出你在那些灾难期内会持有什么样的头寸，这些头寸会遭遇什么样的衰落。

# 9. 第九章 海龟式积木

## 9.1. 常用的趋势跟踪积木
> 页码 155

本章将介绍如下积木：
- 突破（breakout）：突破是指价格冲破了过去一段特定时期内的最高或最低水平。这是原版海龟系统的首要工具。
- 移动平均价（moving average）：是指连续计算的特定时段内的平均价格。之所以称为移动平均价，是因为它们每天都要重新计算，会随着新一天的价格变化而上升或下跌。
- 波幅通道（volatility channel）：波幅通道等于一个移动平均价再加上某个特定的数值，这个特定数值是根据标准差或ATR这一类的波动性指标而确定的。
- 定时退出（time-based exit）：这是最简单的退出策略——在一个事先确定的特定时间退出（比如10天或80天之后退出）。
- 简单回顾（simple lookback）：拿当前价格与早些时候的某个历史价位相比较
有个效果不错的方法就是简简单单地回顾某些天之前的价位。你可以结合像ATR这样的波动性指标来使用这种方法，比如，只要价格超过了100天之前的价格与2ATR之和，你就买入。

> 页码 158

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812175410.png)

如图，20日均线与价格走势更加吻合，而且在6月中旬自下而上穿越了70日均线——这指示了一个向上趋势的开始。这是一个非常常见的入市点：如果短期均线穿越了长期均线，则顺势入市。在本例中，一个长期趋势开始于6月中旬的这个穿越点

> 页码 159

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812175444.png)

波幅通道可以很好地指示出趋势的开始。如果价格超越了一个特定的移动平均值和另一个特定数值之和，这意味着价格有上涨趋势。换句话说，这表明一个趋势可能已经启动

# 10. 第十章 海龟式交易系统
> 页码 162

本章将介绍一些海龟式交易系统，也就是通常所说的长期趋势跟踪系统。它们是：
- ATR通道突破系统：一个波幅通道系统，它把ATR用作波动性指标。
- 布林格突破系统（Bollinger breakout）：一个波幅通道系统，它的波动性指标是标准差。
- 唐奇安趋势系统：一个带有趋势过滤器的突破系统。
- 定时退出唐奇安趋势系统（Donchian trend with time exit）：一个带有趋势过滤器的突破系统，它使用定时退出策略。
- 双重移动均线系统（dual moving average）：在短期移动均线穿越较长期移动均线时买入或卖出的系统。与其他系统不同的是，这个系统始终不离市场，无论是做多还是做空。
- 三重移动均线系统（triple moving average）：这个系统也在短期移动均线穿越较长期移动均线时买入或卖出，但前提是穿越方向符合大趋势（根据一条最长期的移动均线来判断）。

## 10.1. 历史测试
历史检验也被称作事后检验。有许多交易者不相信历史检验，其中还包括不少成功的交易者。他们认为，用历史数据作检验是没有意义的，因为过去并不代表未来。对那些不熟悉这场争论的读者来说，我将花一点篇幅向你解释一件你可能认为不需要解释的事。对那些不相信历史检验的人来说，我想问这么几个问题：你还有别的方法吗？不了解过去，你怎么制定策略？你怎么决定何时买入或卖出？难道瞎猜吗？

> 页码 166

冒牌专家们有一个明显的标志：他们的文章晦涩不清，难以理解。写不清楚，是因为想不清楚。一个真正的专家却可以把复杂的概念解释得简明易懂。
冒牌专家们还有一个共同特征：他们知道如何应用复杂的程序和技巧，也受过良好的培训，但他们并不知道这些技巧的局限性。

## 10.2. 测试参数
> 页码 167

资金管理法则
这里所使用的资金管理法则与海龟们的方法相同，只不过在一个指标上更保守了一些。海龟们令1ATR等于交易资本的1%，而我们的标准是0.5%。也就是说，在为一个给定市场计算合约数量的时候，我们用账户净值的0.5%除以这个市场在交易发生时的ATR值。

## 10.3. 六个系统
#### 10.3.1. ATR通道突破系统
> 页码 168

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230808211514.png)

ATR通道突破系统是一个波幅通道系统，它把真实波动幅度均值（即ATR）用作波动性指标。350日移动平均收盘价加上7个ATR就是通道的顶部，减去3个ATR就是通道的底部。如果前一日的收盘价穿越了通道顶部，则在今日开盘时做多；如果前一日的收盘价跌破通道底部，则在开盘时做空。当收盘价反向穿越了移动平均线，交易者们就会退出。

图10–1就是ATR通道突破系统的一个波幅通道。
中间的曲线是350日移动均线，顶部的曲线就是350均线加7ATR所得出的波幅通道的顶部。


#### 10.3.2. 布林格突破系统

> 页码 169

布林格突破系统
这个系统由查克·勒博和戴维·卢卡斯（David Lucas）在他们1992年的著作《技术交易者期货市场电脑分析指南》中提出（计算移动均价的时间和计算波幅宽度的标准差有所变化）。布林线（Bollinger band）是约翰·布林格（John Bollinger）发明的一种波幅通道。

这个系统的布林线是通过350日移动平均收盘价加减2.5倍标准差而得出的。如果前一日的收盘价穿越了通道的顶部，则在开盘时做多；如果前一日的收盘价跌破通道的底部，则在开盘时做空。

图10–2是布林格突破系统的波幅通道。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230808211719.png)

#### 10.3.3. 唐奇安趋势系统

> 页码 170

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230808211816.png)

我们曾在第五章说过唐奇安趋势系统，它是当年的海龟系统的一个简化版本。它采用20日突破入市策略，10日突破退出策略，还有一个350日/25日指数移动平均趋势过滤器。交易者们严格遵守短期移动均线所指示的方向：如果25日均线在350日均线之上，只能做多；如果25日均线在350日均线之下，只能做空。这个系统还规定了2ATR的止损退出点，这与原版海龟系统相同。图10–3是唐奇安趋势系统的突破位和移动均线。

> 页码 171

与价格走势高度吻合的那条平滑的曲线是短期移动均线，图形底部的那条平滑的曲线是长期移动均线。图中可见，一个长期的向上趋势正在进行中，因此只能做多。价格信息顶部和底部的两条错落不齐的曲线就是突破位。每当市场创下一个新高时，最高点都会直接刷新，因此向上突破位的曲线与价格走势紧密吻合。注意，由于价格呈上升趋势，向下突破位（前期最低点）与价格走势的吻合程度并没有这么高。

> 页码 172

根据这个图，4月10日时应该做多，因为价格在这一天穿越了3月7日创下的0.680 2美元的前期最高点。请注意，3月底时市场曾尝试着突破这个高点，但未能成功。这是阻力作用的一个好例子。当价格第二次上升到这个水平时，终于突破阻力，而且一口气连涨6美分，直至0.74美元也没有明显的回调。之所以突破成功，是因为不再有交易者愿意在这个价位卖出，但却有交易者愿意在更高的价位买入。

#### 10.3.4. 定时退出唐奇安趋势系统

> 页码 172

定时退出唐奇安趋势系统是唐奇安趋势系统的一个变体，它采用的是定时退出策略，而不是突破法退出策略。它在80天之后退出，没有任何形式的止损点。有很多交易者声称入市点并不重要，重要的是退出点。这个系统就是我对他们的答复。当我们稍后比较各个系统的表现时，你会看到这个非常简单的退出策略比那些复杂的策略更胜一筹。

#### 10.3.5. 双重移动均线系统

> 页码 172

双重移动均线系统
这是一个非常简单的系统，只在100日均线穿越350日均线时买入或卖出。与其他系统不同的是，这个系统始终不离市场，无论是做多还是做空。唯一的退出点就是短期均线穿越长期均线的时候：此时，交易者退出上一笔交易，开始一笔相反方向的新交易。

图10–4是双重移动均线系统的移动均线。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230808212513.png)

100日均线与价格走势更加吻合，当它在7月底向上穿越350日均线时，交易者会做多。你可能会发现，你这个系统属于一个相当长期的趋势跟踪系统，交易频率比其他大多数系统都要低

## 10.4. 测试结果

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812184033.png)

# 11. 第十一章 历史测试的谎言
> 页码 182

实际上，历史测试结果和实际交易结果的差异主要是由四大因素造成的：
- 交易者效应：如果一种方法在近期赚了很多钱，那么其他交易者很可能会注意到它，开始用类似的方法模仿它，这很容易导致这种方法的效果不再像一开始那样好。
- 随机效应（random effect）：历史测试的结果夸大了系统的内在优势也可能是纯随机性的现象。
- 最优化矛盾（optimization paradox）：选择特定参数的过程（比如选择25日移动均线而不是30日移动均线），可能降低事后测试的预测价值。
- 过度拟合（overfitting）或曲线拟合：系统可能太过复杂，以至于失去了预测价值。由于它与历史数据的吻合度太高，市场行为的一个轻微变化就会造成效果的明显恶化。

## 11.1. 交易者效应
> 页码 184

假设你是一个黄金交易者。假如你知道ACME公司会在每份410.5美元的价位大举买入1 000份8月份黄金合约，你会怎么做？
如果你的买入量足够大，能把价格推高到这个限价点，你就可以在这个点清仓卖出。如果目前的价格离这个限价点还差得远，你手头的资金可能还不足以把市场推高到这个程度。但如果现价已经接近这个点，比如说是每份408美元，那么几个买单就可以把价格推到足够高的程度，引发来自ACME公司的更多买单。
由于你的策略是首先买入，然后快速卖出，你可能会改变突破点本身的意义。如果没有交易者效应，一次突破可能表明阻力位已经破除，市场向有利方向变动的可能性提高了。但如果加入新买单的影响，突破的意义会被改变，因为这些买单的目的只是将价格推高到突破点的程度。
举个例子。假设没有人愿意在每份408美元以上的价格买入，但有人愿意在每份409美元以上的价格卖出1 000份合约，这些卖单就会像一个天花板，能阻止价格突破每份409美元。如果没有你的买单，市场不会上涨到每份410.50美元的高度，所以突破不会发生。因此，如果你对一个以突破法为基础的系统进行模拟，这里将不会存在突破，自然也没有交易发生。
现在设想一下，你在同样的情况下进入了市场，以每份409美元的均价把那1 000份合约照单全收了。现在，这个价位上已经没有卖者，所以你必须从要价每份411美元的卖者那里再买100份合约，把价格再推高一点。这笔交易会引发ACME公司的买单，这时候，你可以在每份411美元的价位把那1 000份合约卖给ACME公司。尽管ACME公司自我感觉良好，真正大获成功的却是你。最后要做的只是处理掉那剩下的100份合约。由于在近期的高价位上已经没有买家，你只能低价出售，回到每份407美元的价位卖出。不考虑佣金成本，你在这100份合约上赔了4万美元（每盎司赔4美元，每份合约100盎司，一共100份合约），但你在那1 000份合约上赚了20万美元（每盎司赚2美元，每份合约100盎司，一共1 000份合约），这样总共就赚16万美元。这对一次历时几秒钟的操作来说已经是很不错的结果。
ACME公司的那些寄希望于突破法优势的交易者们现在怎么样呢？他们手里有一个巨大的亏损头寸，而且进入这个头寸的原因与他们的历史检验的原理完全不是一回事。这就是交易者效应的后果。

> 页码 186

我曾一度听说已经有数亿美元开始追随这个系统。但就在它的影响力达到巅峰之后没多久，它的追随者们遭遇了一次旷日持久的衰落，而这样长和这样严重的衰落期在它20年的历史测试中从未出现过。这个系统有一个容易被利用的软肋。按照它的法则，如果当日的收盘价超过了某个特定水平，那么就在次日早晨一开盘时买入或卖出。由于其他交易者知道什么样的价位会引发这些买单或卖单，那么很简单，他们完全可以赶在当日收盘之前买入，然后在次日开盘之后马上卖出。卖出价通常比买入价高得多，因为所有在一夜之间生成的买单都是在这个时候入市的，这是由系统的法则决定的。

更糟糕的是，系统发明者们所选择的市场组合还包括一些流动性较差的市场，比如木材和丙烷。对这样的市场来说，相对较小的交易量就可以对市场造成不小的波动，但却有这么多的系统追随者涌入这些市场。我相信，这个系统之所以突然之间陷入史无前例的衰落，原因之一就在于这种预期性的买入行为一度毁掉了它的优势。其他交易者没有那么笨。他们会利用他们所注意到的任何重复性的模式。正因为这样，开发你自己的系统要强于追随别人的系统。如果你能开发出自己的系统，你的优势就不太容易被其他交易者毁掉，因为他们不会知道你什么时候买入或卖出

> 页码 188

请注意，交易者效应在任何情况下都有可能发生，不一定是某些交易者故意抢先行动的结果。只要有太多的交易者不约而同地试图利用某种市场现象，这种现象的优势就会被毁掉，至少在一段时间内不再有效，因为众多交易者的定单会削弱它的优势。这个问题在套利类交易中尤其普遍，因为这种交易的优势是相对较小的。

## 11.2. 随机效应
> 页码 189

我在提到优势率这个概念的时候说过，我曾对一个随机性入市策略进行了模拟检验，这种策略仅根据电脑模拟的掷硬币结果来决定在开盘时做多还是做空。当时我设计了一个完整的系统，采用以掷硬币结果为基础的进入策略和定时退出策略——在入市之后的若干天后退出，天数从20天到120天不等。然后我对这个系统作了100次测试，所用数据就是我们在第十章中用于比较不同趋势跟踪策略的那些数据。在这100次测试中，最好的一次获得了16.9%的年均回报，在10.5年的测试期内把100万美元变成了550万美元，但最差的一次测试却年均亏损20%。这说明，纯随机性事件可以导致巨大的差异。

> 页码 189

如果我们加入一点优势因素，结果会怎么样？如果我们加入唐奇安趋势系统中的那种趋势过滤器，把这个系统变得类似于一个趋势跟踪系统，结果会怎么样？这样一改，我们的入市决策还是随机性的，但前提是入市行动只能与大趋势的方向一致。这是个有趣的问题，因为无论你观察哪些趋势跟踪基金的表现，你都会发现它们良莠不齐，差异极大。如果某个基金表现得高人一筹，它的管理者当然会说这是卓越的交易策略和执行能力的结果。实际上，超常的表现也可能源于随机效应，而不是什么卓越的策略。如果你考虑一下这样的随机效应在系统有优势的情况下还能有多大的影响，你就能更好地理解这一点。
如果我们在这个完全随机性的系统中加入一个有正优势的趋势过滤器，那么100次测试的平均表现会显著改善。根据我的测试，平均回报率上升至32.46%，平均衰落幅度下降至43.74%。但即使加入了过滤器，各次测试结果之间仍有相当大的差异。在100次随机测试中，最好的一次达到了53.3%的年均回报率和1.58的MAR比率，最大的衰落只有33.6%；但最差的一次只有17.5%的回报率，最大衰落却有62.7%之大

> 页码 190

考虑一下上面所说的100次测试中的最佳结果。假如你的交易风格比较保守，比如说你的风险水平只有海龟们的25%，那么其中的一次测试将得出10年内25.7%的年均回报率和仅仅17.7%的最大衰落。我们都知道，一个随机性入市的交易者在未来的表现不太可能达到这个水平，因为随机性策略是没有优势的。遗憾的是，对一个只相信历史记录的人来说，诸多交易者之中总有某些看起来技高一筹但实际上极为平庸的幸运儿。

> 页码 191

你用业绩衡量指标去区分好基金和坏基金的时候，你很容易遭遇随机效应问题。因为运气好的平庸交易者要多于运气不佳的优秀交易者。假设有1 000个交易者，其中有80%接近于平均水平，只有五六个真正的高手。那么，只有五六个人有可能成为运气不佳的优秀交易者，却有800个平庸的人有机会拥有好运。如果这800个人里有2%能幸运地拥有10年的良好记录（从前面所说的测试中可以看到，实际比率甚至可能高于2%），这意味着，拥有良好记录的固然有21个人，但其中只有1/4的人是真正的优秀交易者。

## 11.3. 最优化矛盾

所谓最优化矛盾，是指参数最优化过程有两种相互矛盾的效果：一方面可以提高系统在未来表现良好的概率，另一方面却会降低系统的未来表现符合模拟测试结果的概率。这样，参数最优化虽然提高了系统的预期表现，但也降低了历史模拟指标的预测价值。我相信，正是因为对这种矛盾理解不足，许多交易者才会怀着对过度最优化和曲线拟合的恐惧而对最优化避之唯恐不及。但在我看来，恰当的最优化永远是明智的。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812185621.png)

如果说A点的值代表着一个典型的非最优化参数值，B点的值代表着一个最优化的参数值，那么我会说：B值用在实际交易中更好，但如果用B值，未来的实际交易结果可能逊于B值下的历史检验结果。

相反，A值用在实际交易中不如B值，但它的预测价值更高，因为如果用A值进行交易，那么未来的实际结果与A值下的历史检验结果更为相符——也就是说，未来实际结果好于或逊于历史检验结果的可能性是相同的。

为什么？为了更好地理解这一点，让我们假设未来会发生很大的变化，以至于图11–4中的图有可能要左移或右移一点，但我们不知道向左还是向右。图11–5中的A、B值左右都标出了一个变动范围，这代表着A、B值的相对位置在未来的可能移动范围，我们称为误差幅度。

对A点来说，如果它的相对位置左移，它所对应的系统表现就要低于A点；如果它的位置右移，系统表现就会提高。因此，参数值A下的测试结果有不错的预测价值，不管未来如何变化，因为它高估和低估未来表现的可能性是相同的。

但B点就不一样了。不管向左还是向右移，系统表现都会下降。这意味着B值下的预测结果很有可能高估未来的实际结果。假如这种效应通过多个不同的参数而复合放大，那么未来变化的影响也会复合放大。这意味着，如果有很多参数都是最优化的，那么未来的实际结果与这些最优化参数值下的预测结果就很难吻合。

但这并不意味着我们应该在实际交易中使用参数A。因为即使未来的变化幅度相当可观，B点左右的系统表现仍然高于A点左右的系统表现。因此，尽管最优化过程降低了预测价值，你仍然应该采用最优化参数，因为最优化参数更有可能带来理想的结果，不管未来如何变化。

> 页码 195

考虑一下布林格突破系统，它有两个参数：一个是长期均价，一个是标准差，一定时间内的长期均价加减一定倍数的标准差就是系统的波幅通道。

- 标准差参数

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230808210920.png)

图11–1反映了这个系统在不同标准差参数值下的MAR比率，横轴代表通道宽度，也就是标准差倍数，从1倍到4倍不等。
图中可见，2.4倍标准差对应着最好的模拟结果。任何小于或大于2.4倍标准差的入市标准都会降低MAR比率

如果通道太窄，交易次数就会过多，这会削弱系统的表现；如果通道太宽，你在等待入市的过程中会白白错过很多趋势，这也对系统不利。如果你因为害怕过度最优化和曲线拟合而放弃最优化，你就得不到这种认识，而这种认识本来可以大大地改善你的交易结果，也为你在未来设计更好的系统提供一些新的理念

- 移动均线参数
![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812185214.png)

图11–2反映了移动平均收盘价的计算天数对MAR比率的影响，移动均价的计算天数能决定布林线波幅通道的中心线，从150天到500天不等。如图所示，350日对应着最佳的测试结果。任何大于或小于350日的参数值都会降低MAR比率。

- 退出标准参数

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812185334.png)

图11–3则反映了不同退出标准参数下的MAR比率。

退出标准是一个规定系统退出点的参数。我们在前文介绍布林格突破系统的时候说过，当收盘价穿越了移动均线（也就是通道的中心线）时，系统就退出市场。

在这次测试中，我的目的就是检验一下系统在这个穿越点之后或之前退出市场会怎么样。在图中，正的退出标准参数值对多头交易来说表示高于移动均线的标准差倍数，对空头交易来说则表示低于均线的标准差倍数。相反，负的参数值对多头交易来说表示均线之下，对空头交易来说表示均线之上。让我们看看退出标准参数值从–1.5逐渐变动到1.0的影响。如图11–3所示，参数值达到–0.8时，测试结果最好。任何高于或低于–0.8的值都会降低MAR比率。

## 11.4. 过度拟合
过度拟合通常发生在系统变得过于复杂的时候。有时候，你可以通过添加法则来提高一个系统的历史表现，但这仅仅是因为这些法则影响了屈指可数的几笔重要交易。添加法则会导致过度拟合，这对发生在关键时期的交易来说尤其明显。比如，假如一条法则要求你在接近最高峰的时候退出一个特别大的赢利头寸，这当然会提高你的系统表现，但如果这条法则对其他情况没有充分的适用性，这就成了过度拟合。


我发现用极端的例子来说明一种现象往往有助于我们更好地理解它。所以，我想给出一个极端过度拟合的例子。我会从非常简单的双重移动均线系统开始，然后添加一些法则，开始数据的过度拟合。

我们知道，这个系统在最后6个月的测试期内遭受了一次非常严重的衰落。所以，我会加入几条新法则，通过解决衰落问题来提高系统的表现。当衰落幅度达到一定的水平时，我就把我的头寸规模降低到一定的百分比；在衰落期结束后，我再把头寸恢复到正常水平。

让我们把这条新法则添加到系统中。这个法则有两个需要最优化的参数：一是头寸压缩的百分比，二是开始头寸压缩的衰落限制标准。根据模拟出的净值曲线，我决定在衰落幅度达到38%的情况下把头寸减小90%。添加这条法则大大提高了系统的表现，回报率从没有这条法则时的41.4%上升到了45.7%，最大衰落从56%下降到了39.2%，MAR比率从0.74上升到了1.17。你可能会想：“这是个很棒的法则，系统大有改善。事实上，你完全错了。

问题在于，这个法则在整个测试期内只有这一次发挥作用。它发生在测试期马上就要结束的时候，而我加入这条法则是因为我已经知道了净值曲线的形状。因此，系统已经被有意地进行了数据拟合。“这有什么大不了的？”你可能会问。那就让我们看看图11–6，也就是不同衰落限制下的MAR比率。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230812190218.png)

很明显，当我们把衰落限制下降到37%以下时，系统的表现急转直下。事实上，衰落限制只下调了1%，系统就从每年赢利45.7%陡然变为每年亏损0.4%。原因何在？原来，下调衰落限制后，这个法则将在1996年8月间生效，导致我们把头寸规模大幅削减，以至于后期赢利太少，没能从衰落中恢复元气。由此可见，这条法则并没有那么好。它在第一次试验中有效仅仅是因为那次衰落发生在测试期即将结束的时候，头寸削减对后期表现的影响并没有体现出来。

参数值的微小变化却引发了交易结果的剧烈变化，这种现象被交易者们称为峭壁（cliff）。峭壁的出现是个很好的信号，这证明你可能已经犯了过度拟合的错误，而且你的实际交易结果可能会与测试中的结果大相径庭。峭壁现象也是我们认为参数最优化有益的原因之一：通过最优化程序，你可以发现峭壁，在开始交易之前就修正这个问题。

正如我们在第二章中所说，人们往往对某种特定现象的少数事例过于重视，但却忽略了一个重要事实：从统计学上说，我们从寥寥几个例子中得不出太多的结论。这个问题就是过度拟合的主要缘由。添加某些不太经常发挥作用的法则会导致无意中的过度拟合，而这会造成事后测试结果与实际交易结果的差异。

# 12. 第十二章 历史测试的统计学基础
## 12.1. 测试样本的有效性
样本分析在统计学上的有效性受两大因素的影响：一个是样本规模，一个是样本对总体的代表性。
## 12.2. 衡量指标的稳健性
如果对数据稍作改变并不会显著影响一个统计指标，我们就说这个指标是稳健的。但现有的指标对数据的变化都太过敏感，因此都太不稳健。正因为如此，在我们对交易系统作历史模拟检验时，参数值的轻微变化就会带来某些指标值的大幅变化。这些指标本身就是不稳健的——也就是说，它们对数据的轻微变化太过敏感。任何对数据有影响的因素都会对测试结果产生过大的影响，这很容易导致数据拟合，很容易让你被不切实际的测试结果所迷惑。要想有效地测试海龟方法，我们要做的第一件事就是克服这个问题，找到稳健的业绩衡量指标

比尔·埃克哈特就曾问过我这样一个问题：“你知道什么是稳健的统计指标吗？”当时我茫然地呆坐了几秒钟，然后坦白说：“我不知道。”现在我可以回答这个问题了。事实上，数学中有个专门研究不完全信息和错误假设的分支就叫作稳健统计学（robust statistics）。

把MAR比率、CAGR（平均复合增长率）和夏普比率用作相对表现的衡量指标， 这三个指标都很敏感，是因为回报率指标对测试期的起止日非常敏感，以`CAGR`为例，它在对数刻度图中就等于曲线起点和终点的连接线的斜率，而改变起止日会令这条直线的斜率大大改变。我们可以从图12–1中看到这种效果。

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230827102607.png)


**CAGR定义**：

\[ \text{CAGR} = \left( \frac{\text{Ending Value}}{\text{Beginning Value}} \right)^{\frac{1}{n}} - 1 \]

其中：
- \(\text{Ending Value}\) 是期末的投资价值。
- \(\text{Beginning Value}\) 是期初的投资价值。
- \(n\) 是投资期限的年数。

CAGR之所以对测试起止日敏感，是因为它在对数刻度图中就等于曲线起点和终点的连接线的斜率，而改变起止日会令这条直线的斜率大大改变。我们可以从图12–1中看到这种效果。



## 12.3. 回归年度回报率
> 页码 215

对所有可能连线上的所有点进行一次简单的线性回归，我们就能得到回报率的一个更好的衡量指标，线形回归线和它所代表的回报率为我们提供了一个新指标，我称之为`RAR`（regressed annual return，回归年度回报率）。这个指标对测试期起止日的变化远不像`CAGR`那样敏感。从图12–2中可以看到，当RAR的测试起止日改变时，回归线斜率的变化要小得多

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230827103149.png)

## 12.4. 稳健风险回报比率
> 页码 217

为了把上述所有因素都考虑在内，我发明了一个新的风险回报比指标，我称之为稳健风险回报比率（robust risk/reward ratio）。我也喜欢称之为R立方，因为我的骨子里还是有点技术遗风，习惯于用这样的术语。R立方的分子就是RAR，分母也是个新指标，我称之为长度调整平均最大衰落（length-adjusted average maximum drawdown）。这个分母指标有两个要素：平均最大衰落和长度调整。
平均最大衰落就是5次最大衰落幅度的平均值。长度调整就是将这5个衰落期的平均天数除以365天，然后用这个结果乘以平均最大衰落。

R立方定义：

\[ R^3 = \frac{RAR}{LAMD} \]

其中： 
- \( RAR \) 回归年度回报率
- \( LAMD \) 是长度调整平均最大衰落（length-adjusted average maximum drawdown）。

LAMD的定义:

\[ LAMD = AMD \times \frac{ADL}{365} \]

其中：
- \( AMD \) 是平均最大衰落，计算方法为5次最大衰落幅度的平均值。
- \( ADL \) 是平均衰落长度，计算方法为5次衰落期的天数相加再除以5。

**例子**

假设 \( RAR = 50\% \)、\( AMD = 25\% \) 并且 \( ADL = 365 \) 天，那么：

\[ R^3 = \frac{50\%}{25\% \times \frac{365}{365}} = 2.0 \]


## 12.5. 稳健夏普比率
> 页码 218

稳健夏普比率就是RAR除以年度化的月度回报标准差。这个指标对数据变化的敏感度较低，原因与RAR的敏感度低于CAGR的原因相同，上面已经说过。如表12–1所示，稳健指标对测试起止日的变化远不如普通指标敏感。

**稳健夏普比率定义**：

\[ \text{Robust Sharpe Ratio} = \frac{RAR}{\sigma_{annualized}} \]

其中：
- \( RAR \) 是风险调整后的回报。
- \( \sigma_{annualized} \) 是年度化的月度回报标准差。年度化的方法通常是将月度标准差乘以\(\sqrt{12}\)（假设市场有12个交易月）。

例子：

假设 \( RAR = 15\% \) 并且月度回报标准差为 \( 3\% \)，那么：

\[ \text{Robust Sharpe Ratio} = \frac{15\%}{3\% \times \sqrt{12}} \]

下图是普通指标和稳健指标的对比：

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230827105737.png)

如果你使用稳健指标，你就不太容易用曲线拟合的手段来显著改善系统的表现。

## 12.6. 样本的代表性
我们的样本交易和检验结果对未来有多大的代表性是由两大因素决定的：
- 市场数量：我们所测试的市场越多，我们就越有可能将市场的各种不同状态包含在内。
- 测试时间：时间跨度较长的测试会涵盖更多的市场状态，而且更有可能将具有未来代表性的历史时期包含在内。
## 12.7. 样本规模
在你测试一条新法则时，你必须衡量一下这个法则的应用频率。如果一条法则在整个测试期内只有4次生效，那么从统计学上说，你无从判断这条法则是否有用，你所看到的效果很有可能只是随机性的。有个办法可以解决这个问题：你可以设法将这条法则一般化，提高它发挥作用的频率。这样一来，样本规模就会扩大，测试的统计学说服力也就相应地提高了。

有两种常见的做法可能将小样本规模的问题进一步放大：一个是单一市场最优化，一个是系统设计过于复杂。
- 单一市场最优化：单独应用在各个市场中的最优化方法更难用足够大的样本进行测试，因为单个市场上的交易机会要少得多。
- 过于复杂的系统：复杂的系统有很多法则，有时候很难判断某一条法则发挥作用的频率或程度。因此，如果用过于复杂的系统进行测试，我们更难对测试结果的说服力抱有信心。出于这些原因，我不建议针对单个市场进行最优化，而且我更喜欢具备统计学意义的简单理念。
## 12.8. 从虚拟测试到市场交易
- 参数调整检验
在决定采用一个系统之前先体验一下参数的作用是个很好的习惯，我称之为参数调整检验。挑出几个系统参数，大幅调整参数值，比如20%~25%，然后看看效果怎么样。以图11–2和图11–3的最优化曲线为例，你可以把参数值调整到远离最优点的地方。对这个布林格通道系统来说，我想看看把`350`天和`–0.8`的最优化退出标准变为`250`天和`0`会怎么样。结果，参数的调整令RAR从`59%`变为`58%`，R立方从`3.67`变为`2.18`，这是相当显著的变化。当你从历史数据测试转向市场中的实战时，你很有可能看到这样的戏剧性变化

- 滚动最优化窗口
还有一个方法可以帮助你直接体验从虚拟测试到现实交易的转变，那就是滚动最优化窗口（rolling optimization window）。随便选择8~10年前的一天，用这一天之前的所有的数据进行最优化——要使用你平常所用的最优化方法，作出你平常会作出的权衡决策，就如同你只有截至那一天的数据。当你得出了“最优化”参数值后，再用这一天之后两年内的数据检验一下这些参数值。系统在这两年内的表现怎么样呢？接下来，把测试终点向后顺延两年（也就是6~8年前的一天），再测试一次。比起上一次测试和上一个滚动窗口，这一次有什么变化？比起你最初的参数值，也就是用所有可用数据计算出的最优值，这一次又有什么不同？继续向后顺延，重复这个程序，直到延伸至今天。

我用这个方法对布林格通道系统进行了最优化。在测试过程中，我对三个参数的值都进行了大范围调整检验，然后根据最优位置（一般来说接近于R立方值达到最大的那个点）选出最优值。我分别做了5次10年期检验，最后的滚动最优化结果如表12–4所示。


![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230827110844.png)

可以看到，在每一个滚动期中，实际表现都与测试值大相径庭。另外，不同滚动期的最优值也不尽相同。这证明了测试结果的不精确性，也反映了从虚拟测试转向实践交易时的不确定性。
## 12.9. 蒙特卡洛检验
蒙特卡洛检验是判断系统稳健性的一种方法，可以回答这样的问题：如果把历史稍作变化会怎么样？未来又会怎么样？通过蒙特卡洛检验，你可以用代表历史实际数据的一系列事件来生成另外一种略有变化的别样景象。

要用蒙特卡洛检验来生成别样景象，我们有两种常见方法可用：

- 交易调整：随机性地改变实际模拟结果中的交易命令和起始日，然后用调整后的交易命令和这些交易的损益水平来调整资产净值。

- 净值曲线调整：在初始净值曲线中随机选择一些部分，将它们组合成新的净值曲线。

在这两种方法中，净值曲线调整所生成的别样净值曲线更具现实性，因为随机改变交易命令的蒙特卡洛检验很容易低估衰落的可能性。

许多有蒙特卡洛检验功能的软件可以用净值曲线调整法生成新的曲线，但它们没有考虑到另外一个重要的问题。根据我的测试和实践经验，我发现大趋势末端的衰落时间和程度远不是随机模拟结果可以比拟的。在这些大衰落期间，趋势跟踪系统的净值曲线呈现出序列相关性------也就是说，今天的资产变化与前一天的资产变化是相互关联的。更简单地说，坏日子往往集中出现，接踵而来，这并不是随机性事件的特征。

仍以2006年春季的黄金、白银和食糖市场为例，如果你调整的仅仅是资产净值的每日变化，那么从5月中旬到6月中旬的一连串剧烈变化将会消失，因为如果你只是随机性地从概率分布曲线甚至是真正的净值曲线中抽取数据，这样的巨变不太可能集中爆发。

考虑到这个问题，我们公司的模拟软件在调整净值曲线的时候也允许随机截取多个交易日的整段曲线，而不仅仅是单个交易日的数据。这样，模拟净值曲线就会把集中而来的不利变化保留下来，如实反映实际交易中的状况。我在测试中采用了截取20日整段曲线的调整方法，我发现，这种方法可以把净值曲线的自动序列关联保留下来，让模拟结果更具现实预测价值。

使用"净值曲线调整"方法进行蒙特卡洛模拟。

步骤：
- 准备原始净值曲线：首先，你需要一条原始的净值曲线，这通常是根据历史数据计算出来的策略或投资组合的累计回报。
- 随机选择净值曲线中的部分：为了模拟新的净值曲线，我们从原始净值曲线中随机选择连续的部分。例如，如果我们的数据是日数据，并且我们想模拟一个月的数据，我们可以随机选择30个连续的交易日。
- 组合选择的部分：重复上一步，直到你得到所需长度的新净值曲线。例如，如果你要模拟一年的数据，你需要重复上一步12次。
- 重复以上步骤：为了得到足够的模拟样本，你需要多次重复上述步骤。

假设我们有一条基于100个交易日的原始净值曲线，我们想模拟一年的净值曲线（假设每年有250个交易日）。

- 从100个交易日中随机选择30天，记为Segment1。
- 再次从100个交易日中随机选择30天，记为Segment2。
- 重复上述步骤，直到得到8个段落。
- 将这8个段落组合起来，得到一个250天的新净值曲线。
- 重复上述步骤多次，得到多条模拟的净值曲线。

这样，你就可以得到一组模拟的净值曲线，从中你可以评估策略或投资组合的潜在风险和回报。

现在，让我们使用Python代码来模拟这一过程：

```py
import numpy as np

# 示例：原始净值曲线（随机生成的）
np.random.seed(0)
original_net_worth_curve = np.cumprod(1 + np.random.randn(100) * 0.01)

def monte_carlo_simulation(original_curve, segment_length=30, total_length=250, num_simulations=500):
    simulated_curves = []
    
    for _ in range(num_simulations):
        simulated_curve = []
        while len(simulated_curve) < total_length:
            start_idx = np.random.randint(0, len(original_curve) - segment_length + 1)
            segment = original_curve[start_idx:start_idx + segment_length].tolist()
            simulated_curve.extend(segment)
        simulated_curves.append(simulated_curve[:total_length])
    
    return simulated_curves

# 进行模拟
simulated_curves = monte_carlo_simulation(original_net_worth_curve)

# 返回前两条模拟的净值曲线作为示例
simulated_curves[:2]

import matplotlib.pyplot as plt

plt.figure(figsize=(12, 6))
plt.plot(original_net_worth_curve, label="Original Net Worth Curve", color="blue", linewidth=2)
plt.plot(simulated_curves[0], label="Simulated Curve 1", color="green", linestyle="--")
plt.plot(simulated_curves[1], label="Simulated Curve 2", color="red", linestyle="--")
plt.title("Original vs Simulated Net Worth Curves")
plt.xlabel("Trading Days")
plt.ylabel("Net Worth")
plt.legend()
plt.grid(True)
plt.show()
```

![](https://suzixinblog.oss-cn-shenzhen.aliyuncs.com/20230827115922.png)

在上图中，你可以看到以下内容：

- 蓝色实线：这是原始的净值曲线，基于我们生成的100个交易日的数据。
- 绿色与红色虚线：这是两条我们通过蒙特卡洛模拟得到的"别样"净值曲线。你可以看到它们与原始曲线有很大的不同，因为它们是由原始曲线的不同部分随机组合而成的。

# 13. 第十三章 防卫系统
## 13.1. 稳健交易策略的两大特征
> 页码 237

一旦你的交易策略考虑到了未来的不可知性，你的表现反而会变得更加容易预测。这看似矛盾，其实原因很简单：如果你的交易策略以未来不可知的前提假设为基础，那么未来的任何市场状态都已在你的预料之中，你不需要预测什么。相反，如果你的交易策略以某些特定的市场特征假设（实际上任何假设都一样）为基础，那么一旦这些假设未能成立，你的策略就失去了立足点。
那么，我们如何去制定一套不依赖于特定市场条件的交易策略呢？任何稳健的交易策略都有两大特征：分散化和简化。说到这两大要素对稳健性的贡献，我们的大自然提供了最好的例子。在这方面，我们可以把交易系统的稳健性形象地比作生态系统和系统内各个物种的生存能力

**分散化**

在生态系统中，大自然不会仅靠一两个物种去完成一个任务。它不会只有一种食肉动物，只有一种食物源，只有一种食草动物，只有一种负责清理尸骸的食腐动物。分散化非常重要，因为它可以避免生态系统在某种生物的数量急剧变化的情况下陷于被动。

**简化**

在稳定的环境中，复杂的生态系统更有韧性，复杂的物种似乎也远优于简单的物种。但在变化时期，复杂的物种更容易灭亡，因为在这些时候，最坚强的物种都是那些非常简单的物种，比如病毒和细菌。简单的生命体之所以更为坚强，是因为它们并不是那么依赖于特殊的环境

## 13.2. 加强系统的稳健性
> 页码 239

加强系统的稳健性有两大要点，一是确保系统法则能适应各种不同的市场状况，二是让系统保持简明，不容易受市场变化的影响。

> 页码 240

任何系统都有更适合自己的市场状态。趋势跟踪系统在平静的趋势中表现更好，反趋势系统在稳定中有波动的市场状态下表现更好。

> 页码 240

简单的法则能提高系统的稳健性，正是因为这样的法则能在各种各样的不同境况下发挥作用。复杂的系统之所以变得这样复杂，一般是因为系统开发者们总想添加新的法则，利用他们所注意到的某些市场状况或行为。这样的法则越多，系统对特定市场状况或行为的依赖性就越高。这样一来，未来的市场不具备这些条件的可能性就越大，而在这样的市场中，这些复杂的法则不会再生效。

## 13.3. 选择多个不同的市场
> 页码 241

选择多个不同的市场是提高交易稳健性的最有效的方法之一。市场越多，你就越有可能在至少某一个市场中碰到有利于你的状态。对趋势跟踪系统来说，你参与的市场越多，其中某个市场存在趋势的可能性就越大。

> 页码 244

排除某个市场的主要原因在于流动性问题。比起高流动性的市场，交易不够活跃、成交量不够大的市场要棘手得多。你做得越出色，这个因素对你的限制就越大。这就是里奇禁止我们交易咖啡的原因。我们的交易量本身就很大，再加上里奇的交易，我们在进入和退出市场的时候要买卖数千份咖啡合约。这当然已经接近市场容量的极限。因此，里奇的决定是个非常合理的决定，尽管我宁愿他没有作出这个决定。

> 页码 245

市场实际上分为三大类，它们彼此之间有明显的差异，但在同一类别中，不同市场间的差别主要是由随机事件造成的。这三大类市场是：
1. 基本面市场。比如外汇市场和利率产品市场。在这样的市场中，价格变动的主要动因并不是交易行为，而是更高层面上的宏观经济事件和影响。随着时代的变化，这一点变得越来越不明显。但在我看来，美联储、其他国家的类似机构和一国政府的货币政策对外汇和利率产品市场的影响仍然要大于投机者。这些市场的流动性最高，趋势最清晰，最容易被趋势跟踪者们把握。
2. 投机者市场。比如股票市场和咖啡、黄金、白银、原油这一类期货市场。在这些市场中，投机者的影响力要大于政府或那些大的对冲者。价格是由市场态度决定的。这类市场对趋势跟踪者来说较难把握。
3. 综合衍生市场。在这类市场中，投机行为是市场的主要动力，但投机程度有所缓和，因为交易工具都是其他市场的衍生品，而这些市场本身也是相应股票的综合体。e-mini标准普尔500指数期货合约就是个好例子。它也会上下波动，但波动范围受标准普尔500指数的限制。同样的，标准普尔500指数也只是间接地受到投机者的影响。由于一个指数综合了多只股票的纯投机性波动，这里面就有一种动力的平均化和中和作用。对趋势跟踪者来说，这样的市场是最难把握的

> 页码 246

我的看法是：无论对哪一类市场而言，同类别中的所有市场都是相同的，你只需根据市场的类型和流动性来作出决策。我在海龟时代从没碰过第三种市场，但其他很多海龟与我不同。我认为我们的系统对衍生性的综合市场来说还不够好。

> 页码 247

市场分散化往往会受到资金量的限制，因为在可以接受的风险水平下同时进入多个市场是有一定的资金要求的。成功的对冲基金之所以比个人交易者更加游刃有余，大交易者的表现之所以比小交易者更加稳定，资金量就是原因之一。如果你因为资金有限而只能选择10个市场，你的表现会比同时进入50~60个市场的交易者更加难以预料。如果你想在合理的分散化水平下用一个长期趋势跟踪系统交易期货，你至少需要10万美元。而且对大多数交易者来说，即使在这样的分散化程度下，风险水平也过高了

# 14. 第十四章 掌控自己的心魔

## 14.1. 谦虚为上
> 页码 256

如果你想成为伟大的交易者，你必须克服自负心理，培养谦虚谨慎的品性。谦虚能使你接受未来不可知的事实，谦虚能让你放弃预测未来的企图，谦虚能避免你从个人化的角度看待失败的交易，谦虚还能帮助你接纳简简单单的交易法则，因为你不会去寻找无人知晓的秘密来证明自己的与众不同。

## 14.2. 坚定不移
> 页码 258

贵在坚持这条最重要的生活箴言总是说起来容易做起来难。在交易世界中，始终如一地坚持你的策略同样是成功的关键。一种系统性的交易方法，对方法局限性的深入理解，再加上用来建立交易系统的工具，这三者能帮助你成为更加成功、更加坚定的交易者。你必须前后一致，必须能执行你的计划，否则你的计划是毫无意义的

> 页码 259

很多人发现范·撒普、布雷特·斯蒂恩博格（Brett Steenbarger）、阿里·基夫（Ari Kiev）和马克·道格拉斯（Mark Douglas）的著作对交易者掌控自己的心魔大有帮助。我建议你也去拜读一下。

> 页码 260

成功海龟的交易心得
1. 掌握优势：找到一个期望值为正的交易策略，因为长期来看它能创造正的回报。
2. 管理风险：控制风险，守住阵地，否则即使你有一个期望值为正的系统，你可能也等不到它创造成果的那一天。
3. 坚定不移：唯有坚定不移地执行你的策略，你才能真正获得系统的正期望值。
4. 简单明了：长久来看，简单的系统比复杂的系统更有生命力


# 15. 附： 原始海龟交易法则
## 15.1. 波动性的含义
真实波动幅度 = Max(H - L, H - PDC, PDC - L)
其中：
- H：当日最高价
- L：当日最低价
- PDC：前一日收盘价

N的计算公式如下：
N = (19 * PDN + TR) / 20

其中：
- PDN：前一日的N值
- TR：当日的真实波动幅度

需要注意的是，在首次计算N值时，应使用真实波动幅度的20日简单平均值作为PDN。

## 15.2. 头寸规模
波幅调整后的头寸单位

海龟们把头寸分为一个个单位，我们称之为头寸单位。头寸单位的大小要根据市场的波动性进行调整，目的是让一个N相当于账户净值的1%。

因此，一个特定市场或产品的头寸规模单位可以用下列公式算出：

头寸规模单位 = 账户的1% / 市场的绝对波动幅度
           = 账户的1% / 每1点数代表的美元

---

对头寸单位的限制：

| 层面 | 限制范围 | 头寸单位上限 |
|----|-------|--------|
| 1  | 单个市场 | 4      |
| 2  | 高度关联的多个市场 | 6      |
| 3  | 松散关联的多个市场 | 10     |
| 4  | 单个方向（多头或空头） | 12     |

- 单个市场
每一个市场中的头寸单位不得超过4个。

- 高度关联的多个市场
在紧密关联的市场中，我们在某一个方向上的头寸单位不得超过6个（也就是说，空头单位最多6个，多头单位也最多6个）。高度关联的市场组合包括： 民用燃料油与原油，黄金和白银，所有外汇，像短期国债和欧洲美元这样的利率类期货等。

- 松散关联的多个市场
对松散关联的市场来说，我们在某一个方向上的头寸单位不得超过10个。松散关联的市场包括黄金与铜，白银与铜，以及海龟们因为法定头寸限制而无法交易的许多谷类组合。

- 单个方向（多头或空头）
任何一个方向上的总头寸单位都不得超过12个。因此，一个海龟从理论上说可以同时持有12个空头单位和12个多头单位。

-------

海龟们的账户并不是那种在初始净值的基础上逐笔结算的普通账户。我们拿到的是名义账户，大小是指定的，初始净值为零。例如，当我们在1983年2月刚刚开始实战时，许多海龟拿到的是一个100万美元的名义账户。账户规模每年年初调整一次。上调还是下调要看里奇对交易者的评价。调整幅度一般与这个账户上一年度的盈亏状况紧密相关。

每当我们损失了初始账户的10%时，里奇都会把我们的账户规模缩减20%。这样，如果我们的100万美元初始账户损失了10%，也就是10万美元，我们的账户规模将会下调到80万美元，直到账户净值恢复到年初水平。如果我们又一次损失了10%（80万美元的10%，也就是8万美元，这样总损失达到了18万美元），我们就得把账户再压缩20%，这样就只剩下了64万美元的名义账户。


## 15.3. 入市策略

所以他们可能想不到，海龟们使用的是一个以理查德·唐奇安的通道突破系统为基础的非常简单的入市系统。

海龟们使用两个有所差异但也彼此相关的入市系统，我们称为系统1和系统2。我们可以自由决定如何在这两个系统之间分配资金。有的海龟只用系统2，有的在两个系统上各投入50%的资金，还有的采用其他组合。这两个系统分别是：

系统1：以20日突破为基础的短期系统
系统2：以55日突破为基础的长期系统

### 15.3.1. 系统1入市法则
20日突破策略：当今日的价格超越过去20天的最高点或最低点时，产生买入或卖出信号。
- 价格超越20日高点，买入；
- 价格跌破20日低点，卖出。

赢利性突破的影响：如果上一次的突破产生了赢利，则当前这次的20日突破信号会被忽略。
亏损型突破定义：如果在一次突破后，价格在达到利润出场点前反向变动了2N的幅度（N代表的是市场的真实波动幅度，通常以ATR来度量），那么这次突破被认为是亏损型的。
无论上一次突破的方向，只要是亏损型的，当前的新突破都会被视为有效入市信号。
55日保障性突破点：如果20日的突破被忽略了，那么交易者应当在55日的突破点入市。这是为了确保不会错过大的市场趋势。

**例子**：

假设股票A在过去20天内的最高价是$100，最低价是$90。现在股票的价格上涨到$100.1，那么这就是一个超过20日最高点的突破，应当买入。

接着，假设在上次买入后，价格开始下跌，下跌到$95，并且此前并未达到利润出场点，这个下跌超过了2N的幅度，那么上次的突破就是一个亏损型突破。

现在，假设过去20天的最低价是$92，股票的价格下跌到$91.9，那么这是一个20日的下跌突破。但因为上次的突破是亏损型的，这个信号被视为有效，应当卖出。

这个策略的核心是捕捉市场的主要趋势，如果错过了20日突破，55日的突破点是一个保障，确保不会错过长期的趋势。

----

### 15.3.2. 系统2入市法则
只要价格超越55日最高或最低点一个最小单位，我们就入市。如果价格超越了55日高点，海龟们就买入1个头寸单位，开始做多。如果价格跌破了55日低点，海龟们就卖出1个头寸单位，开始做空。

对系统2来说，所有突破都被视为有效信号，无论上一次突破是亏损性还是赢利性的。

### 15.3.3. 逐步建仓

海龟们首先在突破点建立1个单位的头寸，然后按1/2N的价格间隔一步一步扩大头寸。这个1/2N的间隔以上一份定单的实际成交价格为基础。所以，如果最初的突破交易发生了1/2N的成交价偏差，那么新定单的价格将与突破点相差1N，也就是最初1/2N的偏差加上1/2N的标准间隔。

这个过程将继续下去，一直到头寸规模达到上限。如果市场足够活跃，我们有可能在一天内加满4个头寸单位。

请看下面的例子：

黄金

> N=2.50
> 55日突破价=310.00
> 第一个单位：310.00
> 第二个单位：310.00+1/2×2.5=311.25
> 第三个单位：311.25+1/2×2.5=312.50
> 第四个单位：312.50+1/2×2.5=313.75

## 15.4. 止损
我可以明明白白地告诉你：遵守系统法则的命令退出亏损的头寸是一个生死攸关的要点。不会甩掉损失的交易者在长期内都不会成功。包括巴林银行和长期资本管理基金的灾难在内，几乎所有失去控制的致命交易行为都与不能防微杜渐地及时控制损失有关。

要控制损失，最重要的一件事就是在入市之前就确定退出的标准。一旦价格到达了你的止损标准，你必须退出——坚定不移，无一例外。犹豫和动摇终将酿成灾难。

### 15.4.1. 海龟止损点
海龟们根据头寸风险来设定止损标准。任何一笔交易的风险程度都不得超过2%。

由于1N的价格变动代表着账户净值的1%，在2%的风险限制下，价格变动的上限就是2N。海龟们止损标准就是2N：对多头头寸来说，止损价比入市价低2N；对空头头寸来说，止损价比入市价高2N。

为了把整体头寸风险控制在最低水平，如果我们（按1/2N的价格间隔）后续补充了头寸单位，那么之前头寸单位的止损点将相应地调整1/2N。一般来说，这意味着整个头寸的止损点将与最新添加的头寸单位相距2N的距离。不过，如果头寸补充的价格间隔因为市场变化过快或开盘跳空等情况而大于1/2N，止损标准也会有所变化。

下面是一个例子：

原油：

> N=1.20

> 55日突破价=28.30

|                  | 入市价    | 止损价    |
|------------------|----------|----------|
| 第一个单位       | 28.30    | 25.90    |


|                  | 入市价    | 止损价    |
|------------------|----------|----------|
| 第一个单位       | 28.30    | 26.50    |
| 第二个单位       | 28.90    | 26.50    |


|                  | 入市价    | 止损价    |
|------------------|----------|----------|
| 第一个单位       | 28.30    | 27.10    |
| 第二个单位       | 28.90    | 27.10    |
| 第三个单位       | 29.50    | 27.10    |


|                  | 入市价    | 止损价    |
|------------------|----------|----------|
| 第一个单位       | 28.30    | 27.70    |
| 第二个单位       | 28.90    | 27.70    |
| 第三个单位       | 29.50    | 27.70    |
| 第四个单位       | 30.10    | 27.70    |

假设你在交易原油：

你的第一个单位买入价为28.30，止损价应为28.30 - 2N = 25.90。

当你决定加仓，按1/2N的规则，加仓价格为28.30 + 1/2 × 1.20 = 28.90。此时，第一个单位的止损提升1/2N，为25.90 + 1/2 × 1.20 = 26.50，同时，第二个单位的止损也为26.50。

如此类推，当你继续以1/2N的间隔加仓，每次加仓都会导致整个头寸的止损点上调1/2N。

从表格中可以看到，随着你继续加仓，整个头寸的止损点逐渐提高，确保总风险在2%的范围内。

这种策略的好处是，它不仅可以帮助交易者捕捉大的市场趋势，而且通过加仓和调整止损点，还可以在市场逆转时及时止损，保护账户不受重大损失。

-----

由于海龟止损点以N为基础，它们与市场的波动性息息相关。更具波动性的市场有更大的止损范围，但每个头寸单位的合约数量也相对较少。这便统一了所有交易的风险水平，加强了分散化的效果和风险管理的稳健性。

### 15.4.2. 备选止损策略：双重损失

海龟们也学习了另外一种叫作双重损失（the whipsaw）的止损策略。这种策略可以实现更高的利润率，但更难执行，因为它所制造的损失要比一般策略多得多，胜负比率会大大降低。

在双重损失策略下，每一笔交易的风险上限不是2%，而是0.5%。也就是说，价格波动的上限是1/2N。在一个头寸单位止损退出后，交易者将在价格恢复到最初的入市价时重新建立这个单位。有几个海龟很成功地运用了这种策略。

双重损失策略还有一个好处：它不需要随着新头寸单位的补充而调整之前单位的止损点，因为我们最多只能有4个单位，总风险水平不可能超过2%。

比如，如果采用双重损失止损策略，上述原油交易将变成下面的样子：

原油：

> N=1.20

> 55日突破价=28.30

|                  | 入市价    | 止损价    |
|------------------|----------|----------|
| 第一个单位       | 28.30    | 27.70    |
|                  | 入市价    | 止损价    |
| 第一个单位       | 28.30    | 27.70    |
| 第二个单位       | 28.90    | 28.30    |
|                  | 入市价    | 止损价    |
| 第一个单位       | 28.30    | 27.70    |
| 第二个单位       | 28.90    | 28.30    |
| 第三个单位       | 29.50    | 28.90    |
|                  | 入市价    | 止损价    |
| 第一个单位       | 28.30    | 27.70    |
| 第二个单位       | 28.90    | 28.30    |
| 第三个单位       | 29.50    | 28.90    |
| 第四个单位       | 30.10    | 29.50    |

第一个单位的买入价为28.30，其止损价为28.30 - 1/2N = 27.70。

当你决定加仓，按1/2N的规则，加仓价格为28.30 + 1/2 × 1.20 = 28.90。此时，第二个单位的止损价为原始买入价，即28.30。

以此类推，每增加一个单位，其止损价都是其前一个单位的买入价。

根据双重损失策略，每当头寸达到止损并被卖出，你将在价格回到最初的买入点时重新建立这个头寸。这也意味着，在震荡的市场中，你可能会多次在同一价格区间买卖，从而产生“双重损失”。

总之，双重损失策略在特定的市场条件下可能会带来更高的利润，但由于可能会多次在同一价格区间买卖，所以可能会有更大的损失，因此胜负比率可能会降低。

双重损失策略是一种风险较高的策略，特别是在震荡的市场环境中。它依赖于市场在经历短暂的反向移动后能够恢复并继续之前的趋势。这种策略可能不适合所有交易者，尤其是那些不愿意承受短期内多次小额损失的交易者。在考虑是否使用这种策略时，交易者应该仔细评估他们的风险承受能力和市场环境。

## 15.5. 退出
价格永远也不会直上直下，没有波动。因此，要想抓住一次趋势，你必须允许价格偶尔向不利的方向变动。在趋势的初期，这往往意味着10%~30%的利润在你眼前化为乌有，反而转为小小的损失。在趋势的中期，你或许会眼睁睁地看着80%~100%的利润跌去三四成。在这些情况下，放掉包袱、"锁定利润"的诱惑是很强大的。

海龟系统在突破点入市，但大多数突破点都不会引发趋势。这意味着海龟们的大多数交易都是亏损的。如果少数赢利的交易赚不到足够多的钱来弥补这些损失，海龟们会是输家。每一个有效的交易系统都有自己的最佳退出点。

考虑一下海龟交易系统：如果你总是在1N的利润水平下退出赢利的交易，却在2N的止损点退出亏损的交易，你的赢利次数必须是亏损次数的两倍才能做到盈亏平衡。

交易系统的各个成分之间有着复杂的关系。因此，如果你不考虑入市点、资金管理和其他因素，你就没法去考虑正确的退出策略。

赢利头寸的退出策略是最重要的问题之一，但也是最不受重视的问题之一。然而，它完全可以决定一笔交易的成败得失。

海龟退出策略如下：

### 15.5.1. 系统1
系统1采用10日突破退出法则：对多头头寸来说，在价格跌破过去10日最低点时退出；对空头头寸来说，在价格超过10日最高点时退出。总之，如果价格发生了不利于头寸的10日突破，所有头寸单位都要退出。

### 15.5.2. 系统2
系统2则采用20日突破退出法则：对多头来说是20日向下突破，对空头来说是20日向上突破。只要价格发生了不利于头寸的20日突破，所有头寸单位都会退出。

就像入市策略一样，海龟们一般不会通过止损单而退出，而是会紧密观察市场的动向，在价格达到退出突破点时马上下单退出。

### 15.5.3. 退出不易

对大多数交易者来说，海龟系统的退出策略可能是整个系统中最难忍受的一个环节。你必须等待市场创下10日或20日新低才能退出，这往往意味着目睹20%、40%甚至100%的巨额利润瞬间蒸发。

所以，交易者总有一种提早退出的强烈冲动。你需要极强的纪律性才能坚守阵地，忍受利润的蒸发，直到抓住真正的大趋势。在大的赢利交易中遵守纪律和法则的能力就是经验丰富的成功交易者们的标志。

所以其实海龟交易法则的退出策略就是不轻易退出，坚守直到抓住真正的大趋势。

## 15.6. 战术
### 15.6.1. 下单

前面说过，理查德·丹尼斯和比尔·埃克哈特建议海龟们不要使用止损单，而是随时观察市场动向，在价格到达止损价位的时候再行动。他们还告诉我们，限价定单总的来说要强于市价定单。相比起市价定单，限价定单更容易以更有利的价格成交，成交价偏差也要小一些。

任何时候的任何市场都有买入价和卖出价这两个报价。买入价就是买者们愿意接受的买价，卖出价就是卖者们愿意接受的卖价。只要买入价超过了卖出价，交易就会发生。如果市场的成交量足够大，市价定单总能在买入价位或卖出价位成交，不过大定单的成交价有时候也会稍差一些。

一般来说，市场总会发生一定幅度的相对随机性波动，这有时候被称为反弹（bounce）。之所以使用限价定单，就是为了把价格定在反弹区域的底端，而不是简简单单地接受当前的市价。一个小的限价定单不会触动市场，即使定单较大，它对市场的触动也小于市价定单。

确定限价定单的最佳定价是需要一定技巧的。不过，只要多做练习，你完全能学会用接近市价的限价定单获得比市价定单更好的成交价。

### 15.6.2. 急变市场

有时候，市场变化速度太快，顷刻之间就会跳过你的定单价。如果你用的是限价单，你根本没机会成交。在这类急变市场中，每份合约的价值可能在短短几分钟之内涨跌数千美元之多。

在这种情况下，海龟们的原则是保持冷静，等市场稳定下来再做打算。但大多数新手都很难做到这一点。他们会惊慌失措，手忙脚乱地发出市价单。他们十有八九是在最差的时机下单的，到头来一算，他们的成交价是一天内最差的价格，不是最高点就是最低点。

在一个急变市场中，流动性会暂时固定。如果市场露出急变的迹象，卖者会停手观望，等待价格继续上涨，而且在飙升趋势停止之前不会再卖。这样一来，卖出价会急剧上升，而且买卖价差会有所扩大。

随着卖者不断抬高要价，买者们也被迫抬高出价，于是价格的上涨越来越快，最终引来更多的卖者。随着卖者越来越多，价格会平稳下来，往往还会快速逆转，大幅回调。

到头来，市价定单的成交点通常就是上行趋势的最高点，也就是市场开始止升企稳的时候。

在这类情况下，海龟们会一直等到市场出现逆转迹象（至少是暂时逆转）的时候再行动，这时候的成交价通常要比市价定单下的成交价好得多。如果市场趋于稳定后的价格已经超过了我们最初的止损价，我们会退出市场，但不会惊慌失措。

### 15.6.3. 同步入市信号

在很多时候，市场非常平稳，波澜不惊，所以海龟们除了监控手头的头寸之外基本上无事可做，有可能在很长一段时间内没有任何动作。有的时候也会有点忙碌，几个小时内陆陆续续地出现多个信号，我们会按部就班地行动，直到达到相应市场的头寸上限。

但也有的时候，似乎所有的事情都在同一时间发生，我们个个忙得昏天黑地，在一两天之内就从两手空空变成了满仓。而且相互关联的市场上常常会同时发出信号，令疯狂的节奏变得更加疯狂。

如果各个市场一开盘就跳空越过了入市信号，那就更不用说了。你可能在同一天内看到原油、民用燃料油和无铅汽油市场的跳空开盘入市信号。对期货合约来说，同一个市场的多个不同月份的合约同时出现信号也是司空见惯的事。在这种情况下，你必须高效、快速地行动，而且不能惊慌，不能乱下市价定单，否则你的成交价必然会大大恶化。

### 15.6.4. 买强卖弱

如果多个信号在同一时间出现，我们会在同一类市场中选择最强势的市场买入，选择最弱势的市场卖空。

另外，我们在同一时间只会选择一个月份的合约，而且只会建立一个头寸单位。比如，我们不会同时买入2月份、3月份和4月份的民用燃料油合约，而是会选择最强势而且有足够高的成交量和流动性的合约。

这一点极其重要。在同一类相互关联的市场中，最好的多头交易都存在于最强势的市场中（这些市场的表现几乎必然强于较弱的同类市场）。同样，最好的空头交易都存在于最弱势的市场中。

海龟们用多种不同的衡量标准来判断市场的强弱。最简单也最常用的一种方法就是察看图表，根据视觉判断来选出"看起来"更强（或更弱）的市场。

有些海龟的衡量标准是N：他们会比较一下各个市场自发生突破之后已经变化了多少个N，然后在变动幅度最大（以N来衡量）的市场中买入。还有一些海龟把不同市场的变化标准化了：他们用当前价减去3个月之前的价格，然后再除以N值。结果值最高的就是最强的市场，最低的就是最弱的市场。

这些方法都很有效。总而言之，要点在于在最强的市场上做多，在最弱的市场上做空。

### 15.6.5. 合约滚动
当一期合约到期时，你在转向后期新合约之前需要注意两个因素。

首先，在很多时候，近期的合约虽然有很好的趋势，但较远期的合约并没有表现出同样的势头。除非新合约的趋势同样符合你的要求，否则不要向新合约滚动。

其次，你必须赶在现有合约的成交量和未平仓量（open interest）大幅萎缩之前滚向新合约。什么叫"大幅萎缩"要看头寸单位有多大。一般来说，海龟们会在合约到期之前几个星期将现有头寸滚向后期新合约，除非现有合约的表现远好于后期的新合约。

