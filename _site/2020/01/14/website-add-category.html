<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
    <meta http-equiv="Content-Language" content="zh-CN" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- 360 -->
    <meta name="360-site-verification" content="fa6ca3a9a0330e9cecabee0a9fe1d52a" />
    <!-- 搜狗 -->
    <meta name="sogou_site_verification" content="oatSp9uAV5" />
    <!--熊掌号 -->
    <meta name="baidu-site-verification" content="Wkb0Jzk8yx" />
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="IJrXvaK-Luj-lCGP7tymcCbkcfMKi82Y8V21qN9ZT0s" />
    <title>
        
            个人博客网站文章添加目录导航
        
    </title>
    <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">
    
    <link rel="stylesheet" href="/assets/css/materialize.min.css">
    <link rel="stylesheet" href="/assets/css/icons.css">
    

    
        
        <link rel="stylesheet" href="/assets/css/page.css">
        
    
        
        <link rel="stylesheet" href="/assets/css/post.css">
        
    
        
        <link rel="stylesheet" href="/assets/css/syntax.css">
        
    
        
        <link rel="stylesheet" href="/assets/css/article-category.css">
        
    

    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">	
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="个人博客网站文章添加目录导航" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="关于网页文章添加目录导航的介绍与实现" />
<meta property="og:description" content="关于网页文章添加目录导航的介绍与实现" />
<link rel="canonical" href="http://localhost:4000/2020/01/14/website-add-category" />
<meta property="og:url" content="http://localhost:4000/2020/01/14/website-add-category" />
<meta property="og:site_name" content="苏梓鑫的博客" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-01-14T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="个人博客网站文章添加目录导航" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2020/01/14/website-add-category","headline":"个人博客网站文章添加目录导航","dateModified":"2020-01-14T00:00:00+08:00","datePublished":"2020-01-14T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2020/01/14/website-add-category"},"description":"关于网页文章添加目录导航的介绍与实现","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
    <header>
        <nav class="top-nav">
            
            <div class="nav-wrapper">
                <div class="container">
                    
                    <a class="page-title" href="/">苏梓鑫的博客</a>
                    <p class="head-message">学习&nbsp;&nbsp;总结&nbsp;&nbsp;分享&nbsp;&nbsp;提升</p>
                </div>
            </div>
        </nav>

        <div class="container">
            <a href="#" data-target="slide-out" class="sidenav-trigger top-nav full hide-on-large-only">
                <i class="material-icons">menu</i>
            </a>
        </div>
        <ul id="slide-out" class="sidenav sidenav-fixed" style="background-color:#ddd">
            <li>
                <div class="userView">
                    <img class="user-bg" src="/assets/img/bg.png" />
                    <a class="user-avatar" href="https://github.com/suzixin" target="_blank">
                        <img class="circle z-depth-2" src="/assets/img/user.png" width="64" />
                    </a>
                    <div class="white-text user-info">
                        苏梓鑫 <i>(Knight Huang)</i><br>
                        adahsuzixin@gmail.com
                    </div>
                </div>
            </li>
            <li><a class="waves-effect" href="/"><i class="material-icons">home</i>Home - 主页</a></li>
            <li><a class="waves-effect" href="/projects"><i class="material-icons">description</i>Github - 项目</a></li>
            <li><a class="waves-effect" href="/categories"><i class="material-icons">sort</i>Categories - 目录</a></li>
            <li><a class="waves-effect" href="/tags"><i class="material-icons">label</i>Tags - 标签</a></li>
            <li><a class="waves-effect" href="/feed.xml" target="_blank"><i class="material-icons">rss_feed</i>RSS - 订阅</a></li>
            <li><a class="waves-effect" href="/about"><i class="material-icons">person</i>About - 关于我</a></li>
            <li><a class="waves-effect" href="/contact"><i class="material-icons">email</i>Contact - 联系我</a></li>
            <!-- 华为云广告 -->
            <li class="ad">
                <!-- <a href="https://mp.weixin.qq.com/s/ujUoHc3grjO8LD_Bg1fckA" target="_blank"> -->
                <!-- <a href="https://mp.weixin.qq.com/s/MTbMlhjAx8R4fc8Po90EXg" target="_blank">
                    <img src="/assets/img/ad-huaweiyun.png" alt="" width="100%" />
                </a>
                <i class="material-icons" onclick="javascript:this.parentNode.style.display='none';">close</i> -->
            </li>
        </ul>
    </header>
    <main>

<div class="container">
    <div id="page-info">
        <h1 class="page-title white-text">个人博客网站文章添加目录导航</h1>
    </div>
    <div id="page-content" class="row">
        <div id="post-info">
    <ul class="collapsible hoverable" data-collapsible="accordion">
        <li>
            <div class="collapsible-header grey lighten-4">
                <span>
                    <i class="material-icons tooltipped" data-position="left" data-delay="30" data-tooltip="Date">date_range</i>
                    14/01/2020 00:00<br />
                    <div id="busuanzi_container_site_pv">点击量：<span style="display: inline;" id="busuanzi_value_page_pv"></span>次</div>
                    <i id="indicate" class="right material-icons tooltipped" data-position="left" data-delay="30"
                        data-tooltip="Show extra info">info</i>
                </span>
            </div>
            <div class="collapsible-body">
                <span>
                    <i class="material-icons tooltipped" data-position="left" data-delay="30" data-tooltip="Categories">sort</i>
                    
                    
                    
                    <a href="/categories#网站_cap"
                        target="_blank">
                        <div class="chip">网站</div>
                    </a>
                    
                </span>
                <span>
                    <i class="material-icons tooltipped" data-position="left" data-delay="30" data-tooltip="Tags">label</i>
                    
                    
                    
                    <a href="/tags#目录_cap" target="_blank">
                        <div class="chip">目录</div>
                    </a>
                    
                    
                    
                    <a href="/tags#导航_cap" target="_blank">
                        <div class="chip">导航</div>
                    </a>
                    
                </span>
            </div>
        </li>
    </ul>
</div>
<div class="divider"></div>
<div id="post-content" class="row">
    <div class="col s12">
        <h1 id="概述">概述</h1>

<p>之前有写文章探索如何给<a href="https://knightyun.github.io/2019/03/04/articles-search">个人博客网站添加文章搜索功能</a>，可以方便的通过关键词检索相关文章，现在再来探索一下另一个功能，即给文章添加目录导航；对于篇幅较短的文章，目录的有无影响不大，但是当文章篇幅过长时，一个能提供预览和跳转的目录结构预览，就显得意义重大了，接下来就来一步步将它实现出来；</p>

<h1 id="原理">原理</h1>

<h2 id="样式">样式</h2>

<p>实现功能必先思考其原理，目录预览其实就是一块内容，包含当前页面不同级别的标题的组合，并结构化的展示出来，首先我们可以参考一些网站的做法，比如 CSDN 的博客文章就有配置目录插件，下面就是我的某篇文章的目录预览图：</p>

<p><img src="https://i.loli.net/2020/01/14/SIP8mWhlTH1O43M.png" alt="category.png" /></p>

<p>它们的目录插件就是右边侧栏的一个按钮，鼠标放上去就会显示一个侧栏，内容就是当前文章的小标题的集合，不同级别的标题对应这不同程度的缩进，并且点击每个标题都会有相应的页面跳转，这也基本是我们常见而熟悉的目录形式，那么我们就以此为参考来实现；</p>

<h2 id="目录获取">目录获取</h2>

<p>想要生成这么一个目录之前，当然是要先获取目录的内容，前面讲过，目录的内容就是当前文章的所有标题的集合，而我们知道，在 HTML 中标题相关的标签是 <code class="language-plaintext highlighter-rouge">h1, h2, h3, h4, h5, h6</code> 这几个，所以直接获取它们就行了，比如：</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 获取所有的标签名为 h1 的元素</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">);</span>
<span class="c1">// 获取所有的标签名为 h1 - h6 的元素</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1, h2, h3, h4, h5, h6</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>获取内容是一个数组，包含所有标题节点；接下来的问题就是考虑如何结构化存储，这样便于理解的同时又方便后期的读取，所谓结构化，即目录本身就是一类 <strong>树</strong> 结构，比如，目录包含多个一级标题，同时某些以及标题可能还有多个二级标题，甚至再向下延伸出三级标题等等，类似下面的结构：</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├─ 一级标题 1
│  └─ 二级标题 1
│      └─ 三级标题 1
│          └─ 四级标题
├─ 一级标题 2
│  └─ 二级标题 1
├─ 一级标题 3
│  ├─ 二级标题 1
│  ├─ 二级标题 2
│  ├─ 二级标题 3
│  │  ├─ 三级标题 1
│  │  ├─ 三级标题 2
... ... 
</code></pre></div></div>

<p>理论的做法就是以树结构保存获取的标题，类似于下面这种：</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[{</span>
    <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h1Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 一级标题 1 对应的节点</span>
    <span class="na">child</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h2Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 二级标题 1</span>
        <span class="na">child</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h3Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 三级标题 1</span>
            <span class="na">child</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h2Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 二级标题 2</span>
        <span class="na">child</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">}]</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h1Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 一级标题 2</span>
    <span class="na">child</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h2Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 二级标题 1</span>
        <span class="na">child</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">}]</span>
<span class="p">},</span>
<span class="p">{</span>
    <span class="na">node</span><span class="p">:</span> <span class="dl">'</span><span class="s1">h1Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 一级标题 3</span>
    <span class="na">child</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}]</span>
</code></pre></div></div>

<p>看着还是比较复杂的，耗费的空间也较大，需要递归式获取，最后也要递归式的输出，一般文章目录包含的标题数量也是较少的，所以暂且不用这种结构来保存，可以换一种简单的思路，即我们最后生成该目录时可以选择一行一行递进的输出，即设计如下结构：</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span>
    <span class="dl">'</span><span class="s1">h1Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 一级标题 1 对应的元素节点</span>
    <span class="dl">'</span><span class="s1">h2Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 二级标题 1 （隶属于一级标题 1）</span>
    <span class="dl">'</span><span class="s1">h3Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 三级标题 1 （隶属于二级标题 1）</span>
    <span class="dl">'</span><span class="s1">h2Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 二级标题 2 （隶属于一级标题 1）</span>
    <span class="dl">'</span><span class="s1">h1Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 一级标题 2</span>
    <span class="dl">'</span><span class="s1">h2Node</span><span class="dl">'</span><span class="p">,</span> <span class="c1">// 二级标题 1 （隶属于一级标题 2）</span>
    <span class="dl">'</span><span class="s1">h1Node</span><span class="dl">'</span>  <span class="c1">// 一级标题 3</span>
<span class="p">]</span>
</code></pre></div></div>

<p>因为我们只要求最终能输出一列格式化的目录，即挨个依次输出，所以只需以此存储即可，这样占用的空间和复杂度都有所减少；</p>

<h2 id="目录生成">目录生成</h2>

<p>最终展示效果设定为最上面的样图所示，按照之前设计的存储结构，遍历该数组一行一行打印出来即可；关于不用级别的标题应用不同程度的缩进，可以巧妙利用一下元素节点的 <code class="language-plaintext highlighter-rouge">nodeName</code> 这个属性，比如元素节点 <code class="language-plaintext highlighter-rouge">&lt;h1&gt;&lt;/h1&gt;</code> 对应的 <code class="language-plaintext highlighter-rouge">nodeName</code> 就是 <code class="language-plaintext highlighter-rouge">H1</code>，<code class="language-plaintext highlighter-rouge">h2</code> 就对应 <code class="language-plaintext highlighter-rouge">H2</code>，以此类推，我们就利用该值最后的那个数字，乘以一个固定缩进值，这样级别递增的标题节点也就拥有了递增的缩进值，最后样式部分就可以利用 <code class="language-plaintext highlighter-rouge">padding-left</code> 来实现缩进，js 代码的实现思路如下：</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// node 为标题节点，32 是标题级别增加而多缩进的值</span>
<span class="nx">node</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">paddingLeft</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">32</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p>对于点击标题跳转到文章对应标题所在位置这个功能，实现也比较简单，设置对应 <strong>锚点</strong> 即可，也就是标题元素需要设置一个 <code class="language-plaintext highlighter-rouge">id</code> 属性值，然后给点击的 <code class="language-plaintext highlighter-rouge">&lt;a&gt;</code> 标签的 <code class="language-plaintext highlighter-rouge">href</code> 属性也设置为这个 <code class="language-plaintext highlighter-rouge">id</code> 值即可，例如：</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"my-h1"</span><span class="nt">&gt;</span>一级标题<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"my-h1"</span><span class="nt">&gt;</span>点我跳转到一级标题<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<h1 id="具体实现">具体实现</h1>

<h2 id="第三方库">第三方库</h2>

<p>避免重复造轮子，一些基础的格式化样式就交给第三方库去解决吧，这里使用的是 <strong>Materialize</strong> 这个库，安装和引用教程去官网：<a href="https://materializecss.com">https://materializecss.com</a> 查看；</p>

<h2 id="html部分">HTML部分</h2>

<p>具体参考代码与说明如下：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- 引用第三方库 --&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://fonts.googleapis.com/icon?family=Material+Icons"</span> <span class="na">rel=</span><span class="s">"stylesheet"</span><span class="nt">&gt;</span>

<span class="c">&lt;!-- 固定于屏幕右下方的一个悬浮按钮 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"fixed-action-btn"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"btn-floating btn-large blue z-depth-4"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"large material-icons"</span><span class="nt">&gt;</span>apps<span class="nt">&lt;/i&gt;</span>
    <span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
        <span class="c">&lt;!-- 文章目录按钮 --&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"category-btn hide"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"sidenav-trigger btn-floating blue lighten-2"</span> <span class="na">data-target=</span><span class="s">"category"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"material-icons"</span><span class="nt">&gt;</span>format_list_bulleted<span class="nt">&lt;/i&gt;</span>
            <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
        <span class="c">&lt;!-- 下面也可以添加其他按钮，如返回文章顶部等--&gt;</span>
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"btn-floating blue lighten-2"</span> <span class="na">href=</span><span class="s">"javascript: scrollTo(0, 0);"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"material-icons"</span><span class="nt">&gt;</span>publish<span class="nt">&lt;/i&gt;</span>
            <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- 文章目录侧栏 --&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"category"</span> <span class="na">class=</span><span class="s">"hide sidenav grey lighten-4 grey-text text-darken-3"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;p</span> <span class="na">class=</span><span class="s">"center-align"</span><span class="nt">&gt;</span>目录<span class="nt">&lt;/p&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="c">&lt;!-- 下面的元素中存放文章内容 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"post-content"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- 文章内容，需要注意的只有，为不同的标题元素设置不同的 id 属性以实现跳转 --&gt;</span>
    <span class="c">&lt;!-- 以下为示例内容 --&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"t1"</span><span class="nt">&gt;</span>Title 1<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    
    <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">"t11"</span><span class="nt">&gt;</span>Title 1<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    
    <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">"t12"</span><span class="nt">&gt;</span>Title 1<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h3</span> <span class="na">id=</span><span class="s">"t121"</span><span class="nt">&gt;</span>Title 1<span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    
    <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"t2"</span><span class="nt">&gt;</span>Title 2<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    
    <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"t3"</span><span class="nt">&gt;</span>Title 3<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    
    <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">"t31"</span><span class="nt">&gt;</span>Title 3<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Hello World!<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h2 id="css部分">CSS部分</h2>

<p>样式部分因人而异，可以自行设计调整，以下为参考：</p>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">#category</span> <span class="nt">li</span> <span class="nt">a</span><span class="nd">:before</span> <span class="p">{</span> <span class="c">/* 添加一个折叠符号，为了好看 */</span>
    <span class="nl">content</span><span class="p">:</span> <span class="s1">"∟"</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
    <span class="nl">left</span><span class="p">:</span> <span class="m">10px</span><span class="p">;</span>
    <span class="nl">bottom</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">font-size</span><span class="p">:</span> <span class="m">12px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="javascript部分">JavaScript部分</h2>

<p>该部分就是核心所在了，对应上面的 HTML 和 CSS 部分，实现如下：</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 初始化第三方库的插件</span>
<span class="nx">M</span><span class="p">.</span><span class="nx">AutoInit</span><span class="p">();</span> 
<span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">DOMContentLoaded</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elemCategory</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#category</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">M</span><span class="p">.</span><span class="nx">Sidenav</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">elemCategory</span><span class="p">,</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">edge</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">right</span><span class="dl">'</span> <span class="c1">// right 表示在右侧栏显示，left 则表示在左边显示</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">postContent</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#post-content</span><span class="dl">'</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">postContent</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 存在文章内容</span>
    <span class="kd">var</span> <span class="nx">categories</span> <span class="o">=</span> <span class="nx">postContent</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1, h2, h3, h4, h5, h6</span><span class="dl">'</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">categories</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 文章存在标题</span>
        <span class="kd">var</span> <span class="nx">category</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#category</span><span class="dl">'</span><span class="p">),</span>
            <span class="nx">categoryBtn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.category-btn</span><span class="dl">'</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">li</span><span class="dl">'</span><span class="p">),</span>
            <span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="nx">a</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">waves-effect</span><span class="dl">'</span><span class="p">;</span>
        <span class="c1">// 存在目录则显示目录按钮和侧栏</span>
        <span class="nx">category</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">'</span><span class="s1">hide</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">categoryBtn</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">'</span><span class="s1">hide</span><span class="dl">'</span><span class="p">);</span>
    
        <span class="nx">categories</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">node</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="c1">// 每次 cloneNode 取代 createElement</span>
            <span class="c1">// 因为克隆一个元素快于创建一个元素</span>
            <span class="kd">var</span> <span class="nx">_li</span> <span class="o">=</span> <span class="nx">li</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">false</span><span class="p">),</span>
                <span class="nx">_a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    
            <span class="nx">_a</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">innerText</span><span class="p">;</span>
            <span class="c1">// 为标题设置跳转链接</span>
            <span class="nx">_a</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">#</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">node</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
            <span class="nx">_li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">_a</span><span class="p">);</span>
            <span class="c1">// 为不同级别标题应用不同的缩进</span>
            <span class="nx">_li</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">paddingLeft</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">32</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">;</span>
            <span class="nx">category</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">_li</span><span class="p">);</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="效果">效果</h1>

<p>最后附上几张本人博客网站实现的最终效果图，也欢迎点击 <a href="https://knightyun.github.io">https://knightyun.github.io</a> 前往访问 ^_^</p>

<p><img src="https://i.loli.net/2020/01/14/qfkJO3XaMvAh48o.png" alt="批注 2020-01-14 154351.png" /></p>

<p><img src="https://i.loli.net/2020/01/14/BqOuLKszCFxviID.png" alt="批注 2020-01-14 154311.png" /></p>

<p><img src="https://i.loli.net/2020/01/14/GwTP9ZaDMbsyrgv.png" alt="批注 2020-01-14 154435.png" /></p>

    </div>
</div>
<hr>

<!-- valine 评论插件 -->
<h3>评论：</h3>
<div class="comments"></div>
<hr>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '.comments',
        appId: '4XY3DoTJmibNe3rHeAKOxqzl-gzGzoHsz',
        appKey: 'vjothQHALvgTQF9GrSgj577a',
        avatar: 'robohash',
        placeholder: '留下你的评论吧（支持Markdown）~',
        // visitor: true,
    })
</script>

<!-- 微信公众号 -->
<div class="program-knight">
    <p>技术文章推送</p>
    <p>手机、电脑实用软件分享</p>
    <img src="/assets/img/knight.png" alt="微信搜索公众号: 程序骑士" title="微信搜索公众号: 程序骑士">
    <div>
        <img src="/assets/img/wechat.png" alt="wechat">
        <b>微信公众号：程序骑士</b>
    </div>
</div>
<!--百度资源自动提交-->


    </div>
</div>

</main>

<footer class="page-footer teal">
    <div class="container">
        <div class="row">
            <div class="col s12">
                <p class="footer-message grey-text text-lighten-3">以勤劳的双手，用心敲写明天</p>
                <hr>
                <p class="visit-statistics">
                    <span id="busuanzi_container_site_pv">访问量：<span id="busuanzi_value_site_pv"></span>次</span>&nbsp;
                    <span id="busuanzi_container_site_pv">访客量：<span id="busuanzi_value_site_uv"></span>人次</span>
                </p>
                <p class="grey-text text-lighten-4">基于 jekyll 的 Github Pages 个人博客网站
</p>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            Copyright &#xA9; 2021 苏梓鑫的博客. All rights reserved. Powered by
            <a href=https://github.com/suzixin/suzixin.github.io>knightyun</a>.
        </div>
    </div>
    <!-- Search box -->
    <div class="search">
        <i class="material-icons search-icon search-start">search</i>
        <input type="text" class="search-input" placeholder="Searching...（支持正则表达式）" />
        <i class="material-icons search-icon search-clear">clear</i>
        <div class="search-results z-depth-4"></div>
    </div>
    <!-- 右下角功能按钮 -->
    <div class="fixed-action-btn">
        <a class="btn-floating btn-large blue z-depth-4">
            <i class="large material-icons">apps</i>
        </a>
        <ul>
            <li class="category-btn hide">
                <!-- 文章目录按钮 -->
                <a class="sidenav-trigger btn-floating blue lighten-2" data-target="category">
                    <i class="material-icons">format_list_bulleted</i>
                </a>
            </li>
            <li>
                <a class="btn-floating blue lighten-2" href="javascript: searchInput.focus()">
                    <i class="material-icons">search</i>
                </a>
            </li>
            <li>
                <a class="btn-floating blue lighten-2" href="javascript: scrollTo(0, 0);">
                    <i class="material-icons">publish</i>
                </a>
            </li>
            <li>
                <a class="btn-floating blue lighten-2" href="javascript: scrollTo(0, document.body.clientHeight);">
                    <i class="material-icons">file_download</i>
                </a>
            </li>
        </ul>
    </div>
    <!-- 文章目录侧栏 -->
    <ul id="category" class="hide sidenav no-autoinit grey lighten-4 grey-text text-darken-3">
        <li>
            <p class="center-align">目录</p>
        </li>
    </ul>
</footer>


    
    <script src="/assets/js/min/materialize.min.js"></script>
    

    
    <script src="/assets/js/min/post.min.js"></script>
    

    
    <script src="/assets/js/min/particles.min.js"></script>
    

    
    <script src="/assets/js/min/main.min.js"></script>
    

    
    <script src="/assets/js/min/search.min.js"></script>
    

    
    <script src="/assets/js/min/gen-category.min.js"></script>
    




<!-- 以下为插入的第三方网站分析代码 -->

</body>

</html>